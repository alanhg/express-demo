/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ie=["require","exports","vs/base/common/strings","vs/base/common/platform","vs/base/common/path","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/map","vs/base/common/arrays","vs/base/common/network","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/errors","vs/base/common/event","vs/base/common/lifecycle","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],ne=function(te){for(var e=[],L=0,A=te.length;L<A;L++)e[L]=ie[te[L]];return e};define(ie[10],ne([0,1,11,2]),function(te,e,L,A){"use strict";var S,O,b;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.TernarySearchTree=e.UriIterator=e.PathIterator=e.ConfigKeysIterator=e.StringIterator=e.setToString=e.mapToString=e.getOrSet=void 0;function v(f,t,n){let s=f.get(t);return s===void 0&&(s=n,f.set(t,s)),s}e.getOrSet=v;function R(f){const t=[];return f.forEach((n,s)=>{t.push(`${s} => ${n}`)}),`Map(${f.size}) {${t.join(", ")}}`}e.mapToString=R;function M(f){const t=[];return f.forEach(n=>{t.push(n)}),`Set(${f.size}) {${t.join(", ")}}`}e.setToString=M;class C{constructor(){this._value="",this._pos=0}reset(t){return this._value=t,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(t){const n=t.charCodeAt(0),s=this._value.charCodeAt(this._pos);return n-s}value(){return this._value[this._pos]}}e.StringIterator=C;class j{constructor(t=!0){this._caseSensitive=t}reset(t){return this._value=t,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let t=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(t)this._from++;else break;else t=!1;return this}cmp(t){return this._caseSensitive?(0,A.compareSubstring)(t,this._value,0,t.length,this._from,this._to):(0,A.compareSubstringIgnoreCase)(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.ConfigKeysIterator=j;class H{constructor(t=!0,n=!0){this._splitOnBackslash=t,this._caseSensitive=n}reset(t){this._from=0,this._to=0,this._value=t,this._valueLen=t.length;for(let n=t.length-1;n>=0;n--,this._valueLen--){const s=this._value.charCodeAt(n);if(!(s===47||this._splitOnBackslash&&s===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let t=!0;for(;this._to<this._valueLen;this._to++){const n=this._value.charCodeAt(this._to);if(n===47||this._splitOnBackslash&&n===92)if(t)this._from++;else break;else t=!1}return this}cmp(t){return this._caseSensitive?(0,A.compareSubstring)(t,this._value,0,t.length,this._from,this._to):(0,A.compareSubstringIgnoreCase)(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.PathIterator=H;var q;(function(f){f[f.Scheme=1]="Scheme",f[f.Authority=2]="Authority",f[f.Path=3]="Path",f[f.Query=4]="Query",f[f.Fragment=5]="Fragment"})(q||(q={}));class o{constructor(t,n){this._ignorePathCasing=t,this._ignoreQueryAndFragment=n,this._states=[],this._stateIdx=0}reset(t){return this._value=t,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new H(!1,!this._ignorePathCasing(t)),this._pathIterator.reset(t.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(t)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(t){if(this._states[this._stateIdx]===1)return(0,A.compareIgnoreCase)(t,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,A.compareIgnoreCase)(t,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(t);if(this._states[this._stateIdx]===4)return(0,A.compare)(t,this._value.query);if(this._states[this._stateIdx]===5)return(0,A.compare)(t,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}e.UriIterator=o;class g{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const t=this.right;return this.right=t.left,t.left=this,this.updateHeight(),t.updateHeight(),t}rotateRight(){const t=this.left;return this.left=t.right,t.right=this,this.updateHeight(),t.updateHeight(),t}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var p;(function(f){f[f.Left=-1]="Left",f[f.Mid=0]="Mid",f[f.Right=1]="Right"})(p||(p={}));class F{constructor(t){this._iter=t}static forUris(t=()=>!1,n=()=>!1){return new F(new o(t,n))}static forPaths(t=!1){return new F(new H(void 0,!t))}static forStrings(){return new F(new C)}static forConfigKeys(){return new F(new j)}clear(){this._root=void 0}fill(t,n){if(n){const s=n.slice(0);(0,L.shuffle)(s);for(const a of s)this.set(a,t)}else{const s=t.slice(0);(0,L.shuffle)(s);for(const a of s)this.set(a[0],a[1])}}set(t,n){const s=this._iter.reset(t);let a;this._root||(this._root=new g,this._root.segment=s.value());const c=[];for(a=this._root;;){const _=s.cmp(a.segment);if(_>0)a.left||(a.left=new g,a.left.segment=s.value()),c.push([-1,a]),a=a.left;else if(_<0)a.right||(a.right=new g,a.right.segment=s.value()),c.push([1,a]),a=a.right;else if(s.hasNext())s.next(),a.mid||(a.mid=new g,a.mid.segment=s.value()),c.push([0,a]),a=a.mid;else break}const k=a.value;a.value=n,a.key=t;for(let _=c.length-1;_>=0;_--){const B=c[_][1];B.updateHeight();const X=B.balanceFactor();if(X<-1||X>1){const G=c[_][0],V=c[_+1][0];if(G===1&&V===1)c[_][1]=B.rotateLeft();else if(G===-1&&V===-1)c[_][1]=B.rotateRight();else if(G===1&&V===-1)B.right=c[_+1][1]=c[_+1][1].rotateRight(),c[_][1]=B.rotateLeft();else if(G===-1&&V===1)B.left=c[_+1][1]=c[_+1][1].rotateLeft(),c[_][1]=B.rotateRight();else throw new Error;if(_>0)switch(c[_-1][0]){case-1:c[_-1][1].left=c[_][1];break;case 1:c[_-1][1].right=c[_][1];break;case 0:c[_-1][1].mid=c[_][1];break}else this._root=c[0][1]}}return k}get(t){return this._getNode(t)?.value}_getNode(t){const n=this._iter.reset(t);let s=this._root;for(;s;){const a=n.cmp(s.segment);if(a>0)s=s.left;else if(a<0)s=s.right;else if(n.hasNext())n.next(),s=s.mid;else break}return s}has(t){const n=this._getNode(t);return!(n?.value===void 0&&n?.mid===void 0)}delete(t){return this._delete(t,!1)}deleteSuperstr(t){return this._delete(t,!0)}_delete(t,n){const s=this._iter.reset(t),a=[];let c=this._root;for(;c;){const k=s.cmp(c.segment);if(k>0)a.push([-1,c]),c=c.left;else if(k<0)a.push([1,c]),c=c.right;else if(s.hasNext())s.next(),a.push([0,c]),c=c.mid;else break}if(!!c){if(n?(c.left=void 0,c.mid=void 0,c.right=void 0,c.height=1):(c.key=void 0,c.value=void 0),!c.mid&&!c.value)if(c.left&&c.right){const k=this._min(c.right),{key:_,value:B,segment:X}=k;this._delete(k.key,!1),c.key=_,c.value=B,c.segment=X}else{const k=c.left??c.right;if(a.length>0){const[_,B]=a[a.length-1];switch(_){case-1:B.left=k;break;case 0:B.mid=k;break;case 1:B.right=k;break}}else this._root=k}for(let k=a.length-1;k>=0;k--){const _=a[k][1];_.updateHeight();const B=_.balanceFactor();if(B>1?(_.right.balanceFactor()>=0||(_.right=_.right.rotateRight()),a[k][1]=_.rotateLeft()):B<-1&&(_.left.balanceFactor()<=0||(_.left=_.left.rotateLeft()),a[k][1]=_.rotateRight()),k>0)switch(a[k-1][0]){case-1:a[k-1][1].left=a[k][1];break;case 1:a[k-1][1].right=a[k][1];break;case 0:a[k-1][1].mid=a[k][1];break}else this._root=a[0][1]}}}_min(t){for(;t.left;)t=t.left;return t}findSubstr(t){const n=this._iter.reset(t);let s=this._root,a;for(;s;){const c=n.cmp(s.segment);if(c>0)s=s.left;else if(c<0)s=s.right;else if(n.hasNext())n.next(),a=s.value||a,s=s.mid;else break}return s&&s.value||a}findSuperstr(t){const n=this._iter.reset(t);let s=this._root;for(;s;){const a=n.cmp(s.segment);if(a>0)s=s.left;else if(a<0)s=s.right;else if(n.hasNext())n.next(),s=s.mid;else return s.mid?this._entries(s.mid):void 0}}forEach(t){for(const[n,s]of this)t(s,n)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(t){const n=[];return this._dfsEntries(t,n),n[Symbol.iterator]()}_dfsEntries(t,n){!t||(t.left&&this._dfsEntries(t.left,n),t.value&&n.push([t.key,t.value]),t.mid&&this._dfsEntries(t.mid,n),t.right&&this._dfsEntries(t.right,n))}_isBalanced(){const t=n=>{if(!n)return!0;const s=n.balanceFactor();return s<-1||s>1?!1:t(n.left)&&t(n.right)};return t(this._root)}}e.TernarySearchTree=F;class z{constructor(t,n){this.uri=t,this.value=n}}class T{constructor(t,n){this[S]="ResourceMap",t instanceof T?(this.map=new Map(t.map),this.toKey=n??T.defaultToKey):(this.map=new Map,this.toKey=t??T.defaultToKey)}set(t,n){return this.map.set(this.toKey(t),new z(t,n)),this}get(t){return this.map.get(this.toKey(t))?.value}has(t){return this.map.has(this.toKey(t))}get size(){return this.map.size}clear(){this.map.clear()}delete(t){return this.map.delete(this.toKey(t))}forEach(t,n){typeof n!="undefined"&&(t=t.bind(n));for(const[s,a]of this.map)t(a.value,a.uri,this)}*values(){for(const t of this.map.values())yield t.value}*keys(){for(const t of this.map.values())yield t.uri}*entries(){for(const t of this.map.values())yield[t.uri,t.value]}*[(S=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.map)yield[t.uri,t.value]}}e.ResourceMap=T,T.defaultToKey=f=>f.toString();class N{constructor(t,n){this[O]="ResourceSet",!t||typeof t=="function"?this._map=new T(t):(this._map=new T(n),t.forEach(this.add,this))}get size(){return this._map.size}add(t){return this._map.set(t,t),this}clear(){this._map.clear()}delete(t){return this._map.delete(t)}forEach(t,n){this._map.forEach((s,a)=>t.call(n,a,a,this))}has(t){return this._map.has(t)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(O=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=N;var Y;(function(f){f[f.None=0]="None",f[f.AsOld=1]="AsOld",f[f.AsNew=2]="AsNew"})(Y=e.Touch||(e.Touch={}));class I{constructor(){this[b]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,n=0){const s=this._map.get(t);if(!!s)return n!==0&&this.touch(s,n),s.value}set(t,n,s=0){let a=this._map.get(t);if(a)a.value=n,s!==0&&this.touch(a,s);else{switch(a={key:t,value:n,next:void 0,previous:void 0},s){case 0:this.addItemLast(a);break;case 1:this.addItemFirst(a);break;case 2:this.addItemLast(a);break;default:this.addItemLast(a);break}this._map.set(t,a),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){const n=this._map.get(t);if(!!n)return this._map.delete(t),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,n){const s=this._state;let a=this._head;for(;a;){if(n?t.bind(n)(a.value,a.key,this):t(a.value,a.key,this),this._state!==s)throw new Error("LinkedMap got modified during iteration.");a=a.next}}keys(){const t=this,n=this._state;let s=this._head;const a={[Symbol.iterator](){return a},next(){if(t._state!==n)throw new Error("LinkedMap got modified during iteration.");if(s){const c={value:s.key,done:!1};return s=s.next,c}else return{value:void 0,done:!0}}};return a}values(){const t=this,n=this._state;let s=this._head;const a={[Symbol.iterator](){return a},next(){if(t._state!==n)throw new Error("LinkedMap got modified during iteration.");if(s){const c={value:s.value,done:!1};return s=s.next,c}else return{value:void 0,done:!0}}};return a}entries(){const t=this,n=this._state;let s=this._head;const a={[Symbol.iterator](){return a},next(){if(t._state!==n)throw new Error("LinkedMap got modified during iteration.");if(s){const c={value:[s.key,s.value],done:!1};return s=s.next,c}else return{value:void 0,done:!0}}};return a}[(b=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let n=this._head,s=this.size;for(;n&&s>t;)this._map.delete(n.key),n=n.next,s--;this._head=n,this._size=s,n&&(n.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{const n=t.next,s=t.previous;if(!n||!s)throw new Error("Invalid list");n.previous=s,s.next=n}t.next=void 0,t.previous=void 0,this._state++}touch(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==1&&n!==2)){if(n===1){if(t===this._head)return;const s=t.next,a=t.previous;t===this._tail?(a.next=void 0,this._tail=a):(s.previous=a,a.next=s),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===2){if(t===this._tail)return;const s=t.next,a=t.previous;t===this._head?(s.previous=void 0,this._head=s):(s.previous=a,a.next=s),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){const t=[];return this.forEach((n,s)=>{t.push([s,n])}),t}fromJSON(t){this.clear();for(const[n,s]of t)this.set(n,s)}}e.LinkedMap=I;class U extends I{constructor(t,n=1){super();this._limit=t,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,n=2){return super.get(t,n)}peek(t){return super.get(t,0)}set(t,n){return super.set(t,n,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=U}),define(ie[5],ne([0,1,4,3,2,16]),function(te,e,L,A,S,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function b(n){return n===47||n===92}e.isPathSeparator=b;function v(n){return n.replace(/[\\/]/g,L.posix.sep)}e.toSlashes=v;function R(n){return n.indexOf("/")===-1&&(n=v(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}e.toPosixPath=R;function M(n,s=L.posix.sep){if(!n)return"";const a=n.length,c=n.charCodeAt(0);if(b(c)){if(b(n.charCodeAt(1))&&!b(n.charCodeAt(2))){let _=3;const B=_;for(;_<a&&!b(n.charCodeAt(_));_++);if(B!==_&&!b(n.charCodeAt(_+1))){for(_+=1;_<a;_++)if(b(n.charCodeAt(_)))return n.slice(0,_+1).replace(/[\\/]/g,s)}}return s}else if(F(c)&&n.charCodeAt(1)===58)return b(n.charCodeAt(2))?n.slice(0,2)+s:n.slice(0,2);let k=n.indexOf("://");if(k!==-1){for(k+=3;k<a;k++)if(b(n.charCodeAt(k)))return n.slice(0,k+1)}return""}e.getRoot=M;function C(n){if(!A.isWindows||!n||n.length<5)return!1;let s=n.charCodeAt(0);if(s!==92||(s=n.charCodeAt(1),s!==92))return!1;let a=2;const c=a;for(;a<n.length&&(s=n.charCodeAt(a),s!==92);a++);return!(c===a||(s=n.charCodeAt(a+1),isNaN(s)||s===92))}e.isUNC=C;const j=/[\\/:\*\?"<>\|]/g,H=/[\\/]/g,q=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function o(n,s=A.isWindows){const a=s?j:H;return!(!n||n.length===0||/^\s+$/.test(n)||(a.lastIndex=0,a.test(n))||s&&q.test(n)||n==="."||n===".."||s&&n[n.length-1]==="."||s&&n.length!==n.trim().length||n.length>255)}e.isValidBasename=o;function g(n,s,a){const c=n===s;return!a||c?c:!n||!s?!1:(0,S.equalsIgnoreCase)(n,s)}e.isEqual=g;function p(n,s,a,c=L.sep){if(n===s)return!0;if(!n||!s||s.length>n.length)return!1;if(a){if(!(0,S.startsWithIgnoreCase)(n,s))return!1;if(s.length===n.length)return!0;let _=s.length;return s.charAt(s.length-1)===c&&_--,n.charAt(_)===c}return s.charAt(s.length-1)!==c&&(s+=c),n.indexOf(s)===0}e.isEqualOrParent=p;function F(n){return n>=65&&n<=90||n>=97&&n<=122}e.isWindowsDriveLetter=F;function z(n,s){return A.isWindows&&n.endsWith(":")&&(n+=L.sep),(0,L.isAbsolute)(n)||(n=(0,L.join)(s,n)),n=(0,L.normalize)(n),A.isWindows?(n=(0,S.rtrim)(n,L.sep),n.endsWith(":")&&(n+=L.sep)):(n=(0,S.rtrim)(n,L.sep),n||(n=L.sep)),n}e.sanitizeFilePath=z;function T(n){const s=(0,L.normalize)(n);return A.isWindows?n.length>3?!1:N(s)&&(n.length===2||s.charCodeAt(2)===92):s===L.posix.sep}e.isRootOrDriveLetter=T;function N(n,s=A.isWindows){return s?F(n.charCodeAt(0))&&n.charCodeAt(1)===58:!1}e.hasDriveLetter=N;function Y(n){return N(n)?n[0]:void 0}e.getDriveLetter=Y;function I(n,s,a){return s.length>n.length?-1:n===s?0:(a&&(n=n.toLowerCase(),s=s.toLowerCase()),n.indexOf(s))}e.indexOfPath=I;function U(n){const s=n.split(":");let a,c,k;for(const _ of s){const B=Number(_);(0,O.isNumber)(B)?c===void 0?c=B:k===void 0&&(k=B):a=a?[a,_].join(":"):_}if(!a)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:a,line:c!==void 0?c:void 0,column:k!==void 0?k:c!==void 0?1:void 0}}e.parseLineAndColumnAware=U;const f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function t(n,s,a=8){let c="";for(let _=0;_<a;_++)c+=f.charAt(Math.floor(Math.random()*f.length));let k;return s?k=`${s}-${c}`:k=c,n?(0,L.join)(n,k):k}e.randomPath=t}),define(ie[12],ne([0,1,3,6]),function(te,e,L,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileAccess=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var S;(function(v){v.inMemory="inmemory",v.vscode="vscode",v.internal="private",v.walkThrough="walkThrough",v.walkThroughSnippet="walkThroughSnippet",v.http="http",v.https="https",v.file="file",v.mailto="mailto",v.untitled="untitled",v.data="data",v.command="command",v.vscodeRemote="vscode-remote",v.vscodeRemoteResource="vscode-remote-resource",v.vscodeUserData="vscode-userdata",v.vscodeCustomEditor="vscode-custom-editor",v.vscodeNotebook="vscode-notebook",v.vscodeNotebookCell="vscode-notebook-cell",v.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",v.vscodeNotebookCellOutput="vscode-notebook-cell-output",v.vscodeInteractive="vscode-interactive",v.vscodeInteractiveInput="vscode-interactive-input",v.vscodeSettings="vscode-settings",v.vscodeWorkspaceTrust="vscode-workspace-trust",v.vscodeTerminal="vscode-terminal",v.webviewPanel="webview-panel",v.vscodeWebview="vscode-webview",v.extension="extension",v.vscodeFileResource="vscode-file",v.tmp="tmp",v.vsls="vsls",v.vscodeSourceControl="vscode-scm"})(S=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class O{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${S.vscodeRemoteResource}`}setPreferredWebSchema(R){this._preferredWebSchema=R}setDelegate(R){this._delegate=R}setServerRootPath(R){this._remoteResourcesPath=`${R}/${S.vscodeRemoteResource}`}set(R,M,C){this._hosts[R]=M,this._ports[R]=C}setConnectionToken(R,M){this._connectionTokens[R]=M}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(R){if(this._delegate)return this._delegate(R);const M=R.authority;let C=this._hosts[M];C&&C.indexOf(":")!==-1&&(C=`[${C}]`);const j=this._ports[M],H=this._connectionTokens[M];let q=`path=${encodeURIComponent(R.path)}`;return typeof H=="string"&&(q+=`&${e.connectionTokenQueryName}=${encodeURIComponent(H)}`),A.URI.from({scheme:L.isWeb?this._preferredWebSchema:S.vscodeRemoteResource,authority:`${C}:${j}`,path:L.isWeb?(window.location.pathname+"/"+this._remoteResourcesPath).replace(/\/\/+/g,"/"):this._remoteResourcesPath,query:q})}}e.RemoteAuthorities=new O;class b{asBrowserUri(R,M){const C=this.toUri(R,M);return C.scheme===S.vscodeRemote?e.RemoteAuthorities.rewrite(C):C.scheme===S.file&&(L.isNative||L.isWebWorker&&L.globals.origin===`${S.vscodeFileResource}://${b.FALLBACK_AUTHORITY}`)?C.with({scheme:S.vscodeFileResource,authority:C.authority||b.FALLBACK_AUTHORITY,query:null,fragment:null}):C}asFileUri(R,M){const C=this.toUri(R,M);return C.scheme===S.vscodeFileResource?C.with({scheme:S.file,authority:C.authority!==b.FALLBACK_AUTHORITY?C.authority:null,query:null,fragment:null}):C}toUri(R,M){return A.URI.isUri(R)?R:A.URI.parse(M.toUrl(R))}}b.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new b}),define(ie[7],ne([0,1,5,12,4,3,2,6]),function(te,e,L,A,S,O,b,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function R(q){return(0,v.uriToFsPath)(q,!0)}e.originalFSPath=R;class M{constructor(o){this._ignorePathCasing=o}compare(o,g,p=!1){return o===g?0:(0,b.compare)(this.getComparisonKey(o,p),this.getComparisonKey(g,p))}isEqual(o,g,p=!1){return o===g?!0:!o||!g?!1:this.getComparisonKey(o,p)===this.getComparisonKey(g,p)}getComparisonKey(o,g=!1){return o.with({path:this._ignorePathCasing(o)?o.path.toLowerCase():void 0,fragment:g?null:void 0}).toString()}ignorePathCasing(o){return this._ignorePathCasing(o)}isEqualOrParent(o,g,p=!1){if(o.scheme===g.scheme){if(o.scheme===A.Schemas.file)return L.isEqualOrParent(R(o),R(g),this._ignorePathCasing(o))&&o.query===g.query&&(p||o.fragment===g.fragment);if((0,e.isEqualAuthority)(o.authority,g.authority))return L.isEqualOrParent(o.path,g.path,this._ignorePathCasing(o),"/")&&o.query===g.query&&(p||o.fragment===g.fragment)}return!1}joinPath(o,...g){return v.URI.joinPath(o,...g)}basenameOrAuthority(o){return(0,e.basename)(o)||o.authority}basename(o){return S.posix.basename(o.path)}extname(o){return S.posix.extname(o.path)}dirname(o){if(o.path.length===0)return o;let g;return o.scheme===A.Schemas.file?g=v.URI.file(S.dirname(R(o))).path:(g=S.posix.dirname(o.path),o.authority&&g.length&&g.charCodeAt(0)!==47&&(console.error(`dirname("${o.toString})) resulted in a relative path`),g="/")),o.with({path:g})}normalizePath(o){if(!o.path.length)return o;let g;return o.scheme===A.Schemas.file?g=v.URI.file(S.normalize(R(o))).path:g=S.posix.normalize(o.path),o.with({path:g})}relativePath(o,g){if(o.scheme!==g.scheme||!(0,e.isEqualAuthority)(o.authority,g.authority))return;if(o.scheme===A.Schemas.file){const z=S.relative(R(o),R(g));return O.isWindows?L.toSlashes(z):z}let p=o.path||"/";const F=g.path||"/";if(this._ignorePathCasing(o)){let z=0;for(const T=Math.min(p.length,F.length);z<T&&!(p.charCodeAt(z)!==F.charCodeAt(z)&&p.charAt(z).toLowerCase()!==F.charAt(z).toLowerCase());z++);p=F.substr(0,z)+p.substr(z)}return S.posix.relative(p,F)}resolvePath(o,g){if(o.scheme===A.Schemas.file){const p=v.URI.file(S.resolve(R(o),g));return o.with({authority:p.authority,path:p.path})}return g=L.toPosixPath(g),o.with({path:S.posix.resolve(o.path,g)})}isAbsolutePath(o){return!!o.path&&o.path[0]==="/"}isEqualAuthority(o,g){return o===g||o!==void 0&&g!==void 0&&(0,b.equalsIgnoreCase)(o,g)}hasTrailingPathSeparator(o,g=S.sep){if(o.scheme===A.Schemas.file){const p=R(o);return p.length>L.getRoot(p).length&&p[p.length-1]===g}else{const p=o.path;return p.length>1&&p.charCodeAt(p.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(o.fsPath)}}removeTrailingPathSeparator(o,g=S.sep){return(0,e.hasTrailingPathSeparator)(o,g)?o.with({path:o.path.substr(0,o.path.length-1)}):o}addTrailingPathSeparator(o,g=S.sep){let p=!1;if(o.scheme===A.Schemas.file){const F=R(o);p=F!==void 0&&F.length===L.getRoot(F).length&&F[F.length-1]===g}else{g="/";const F=o.path;p=F.length===1&&F.charCodeAt(F.length-1)===47}return!p&&!(0,e.hasTrailingPathSeparator)(o,g)?o.with({path:o.path+"/"}):o}}e.ExtUri=M,e.extUri=new M(()=>!1),e.extUriBiasedIgnorePathCase=new M(q=>q.scheme===A.Schemas.file?!O.isLinux:!0),e.extUriIgnorePathCase=new M(q=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function C(q,o){const g=[];for(let p=0;p<q.length;p++){const F=o(q[p]);q.some((z,T)=>T===p?!1:(0,e.isEqualOrParent)(F,o(z)))||g.push(q[p])}return g}e.distinctParents=C;var j;(function(q){q.META_DATA_LABEL="label",q.META_DATA_DESCRIPTION="description",q.META_DATA_SIZE="size",q.META_DATA_MIME="mime";function o(g){const p=new Map;g.path.substring(g.path.indexOf(";")+1,g.path.lastIndexOf(";")).split(";").forEach(T=>{const[N,Y]=T.split(":");N&&Y&&p.set(N,Y)});const z=g.path.substring(0,g.path.indexOf(";"));return z&&p.set(q.META_DATA_MIME,z),p}q.parseMetaData=o})(j=e.DataUri||(e.DataUri={}));function H(q,o,g){if(o){let p=q.path;return p&&p[0]!==S.posix.sep&&(p=S.posix.sep+p),q.with({scheme:g,authority:o,path:p})}return q.with({scheme:g})}e.toLocalResource=H}),define(ie[8],ne([0,1,13,17,18,19,7,3]),function(te,e,L,A,S,O,b,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function R(u){return!!u&&typeof u.then=="function"}e.isThenable=R;function M(u){const i=new L.CancellationTokenSource,r=u(i.token),l=new Promise((h,y)=>{const W=i.token.onCancellationRequested(()=>{W.dispose(),i.dispose(),y(new A.CancellationError)});Promise.resolve(r).then(Q=>{W.dispose(),i.dispose(),h(Q)},Q=>{W.dispose(),i.dispose(),y(Q)})});return new class{cancel(){i.cancel()}then(h,y){return l.then(h,y)}catch(h){return this.then(void 0,h)}finally(h){return l.finally(h)}}}e.createCancelablePromise=M;function C(u,i,r){return new Promise((l,h)=>{const y=i.onCancellationRequested(()=>{y.dispose(),l(r)});u.then(l,h).finally(()=>y.dispose())})}e.raceCancellation=C;function j(u,i){return new Promise((r,l)=>{const h=i.onCancellationRequested(()=>{h.dispose(),l(new A.CancellationError)});u.then(r,l).finally(()=>h.dispose())})}e.raceCancellationError=j;async function H(u){let i=-1;const r=u.map((h,y)=>h.then(W=>(i=y,W))),l=await Promise.race(r);return u.forEach((h,y)=>{y!==i&&h.cancel()}),l}e.raceCancellablePromises=H;function q(u,i,r){let l;const h=setTimeout(()=>{l?.(void 0),r?.()},i);return Promise.race([u.finally(()=>clearTimeout(h)),new Promise(y=>l=y)])}e.raceTimeout=q;function o(u){return new Promise((i,r)=>{const l=u();R(l)?l.then(i,r):i(l)})}e.asPromise=o;class g{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(i){if(this.activePromise){if(this.queuedPromiseFactory=i,!this.queuedPromise){const r=()=>{this.queuedPromise=null;const l=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,l};this.queuedPromise=new Promise(l=>{this.activePromise.then(r,r).then(l)})}return new Promise((r,l)=>{this.queuedPromise.then(r,l)})}return this.activePromise=i(),new Promise((r,l)=>{this.activePromise.then(h=>{this.activePromise=null,r(h)},h=>{this.activePromise=null,l(h)})})}}e.Throttler=g;class p{constructor(){this.current=Promise.resolve(null)}queue(i){return this.current=this.current.then(()=>i(),()=>i())}}e.Sequencer=p;class F{constructor(){this.promiseMap=new Map}queue(i,r){const h=(this.promiseMap.get(i)??Promise.resolve()).catch(()=>{}).then(r).finally(()=>{this.promiseMap.get(i)===h&&this.promiseMap.delete(i)});return this.promiseMap.set(i,h),h}}e.SequencerByKey=F;const z=(u,i)=>{let r=!0;const l=setTimeout(()=>{r=!1,i()},u);return{isTriggered:()=>r,dispose:()=>{clearTimeout(l),r=!1}}},T=u=>{let i=!0;return queueMicrotask(()=>{i&&(i=!1,u())}),{isTriggered:()=>i,dispose:()=>{i=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class N{constructor(i){this.defaultDelay=i,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(i,r=this.defaultDelay){this.task=i,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((h,y)=>{this.doResolve=h,this.doReject=y}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const h=this.task;return this.task=null,h()}}));const l=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=r===e.MicrotaskDelay?T(l):z(r,l),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new A.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=N;class Y{constructor(i){this.delayer=new N(i),this.throttler=new g}trigger(i,r){return this.delayer.trigger(()=>this.throttler.queue(i),r)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=Y;class I{constructor(){this._isOpen=!1,this._promise=new Promise((i,r)=>{this._completePromise=i})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=I;class U extends I{constructor(i){super();this._timeout=setTimeout(()=>this.open(),i)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=U;function f(u,i){return i?new Promise((r,l)=>{const h=setTimeout(()=>{y.dispose(),r()},u),y=i.onCancellationRequested(()=>{clearTimeout(h),y.dispose(),l(new A.CancellationError)})}):M(r=>f(u,r))}e.timeout=f;function t(u,i=0){const r=setTimeout(u,i);return(0,O.toDisposable)(()=>clearTimeout(r))}e.disposableTimeout=t;function n(u){const i=[];let r=0;const l=u.length;function h(){return r<l?u[r++]():null}function y(W){W!=null&&i.push(W);const Q=h();return Q?Q.then(y):Promise.resolve(i)}return Promise.resolve(null).then(y)}e.sequence=n;function s(u,i=l=>!!l,r=null){let l=0;const h=u.length,y=()=>{if(l>=h)return Promise.resolve(r);const W=u[l++];return Promise.resolve(W()).then(Z=>i(Z)?Promise.resolve(Z):y())};return y()}e.first=s;function a(u,i=l=>!!l,r=null){if(u.length===0)return Promise.resolve(r);let l=u.length;const h=()=>{l=-1;for(const y of u)y.cancel?.()};return new Promise((y,W)=>{for(const Q of u)Q.then(Z=>{--l>=0&&i(Z)?(h(),y(Z)):l===0&&y(r)}).catch(Z=>{--l>=0&&(h(),W(Z))})})}e.firstParallel=a;class c{constructor(i){this._size=0,this.maxDegreeOfParalellism=i,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new S.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(i){return this._size++,new Promise((r,l)=>{this.outstandingPromises.push({factory:i,c:r,e:l}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const i=this.outstandingPromises.shift();this.runningPromises++;const r=i.factory();r.then(i.c,i.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}e.Limiter=c;class k extends c{constructor(){super(1)}}e.Queue=k;class _{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const i=new m;return this.drainers.add(i),i.p}isDrained(){for(const[,i]of this.queues)if(i.size>0)return!1;return!0}queueFor(i,r=b.extUri){const l=r.getComparisonKey(i);let h=this.queues.get(l);return h||(h=new k,S.Event.once(h.onDrained)(()=>{h?.dispose(),this.queues.delete(l),this.onDidQueueDrain()}),this.queues.set(l,h)),h}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const i of this.drainers)i.complete();this.drainers.clear()}dispose(){for(const[,i]of this.queues)i.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=_;class B{constructor(i,r){this._token=-1,typeof i=="function"&&typeof r=="number"&&this.setIfNotSet(i,r)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(i,r){this.cancel(),this._token=setTimeout(()=>{this._token=-1,i()},r)}setIfNotSet(i,r){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,i()},r))}}e.TimeoutTimer=B;class X{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(i,r){this.cancel(),this._token=setInterval(()=>{i()},r)}}e.IntervalTimer=X;class G{constructor(i,r){this.timeoutToken=-1,this.runner=i,this.timeout=r,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(i=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,i)}get delay(){return this.timeout}set delay(i){this.timeout=i}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}e.RunOnceScheduler=G;class V{constructor(i,r){r%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${r}ms is not a multiple of 1000ms.`),this.runner=i,this.timeout=r,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(i=this.timeout){i%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(i/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}e.ProcessTimeRunOnceScheduler=V;class J extends G{constructor(i,r){super(i,r);this.units=[]}work(i){this.units.push(i),this.isScheduled()||this.schedule()}doRun(){const i=this.units;this.units=[],this.runner?.(i)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=J;class se extends O.Disposable{constructor(i,r){super();this.options=i,this.handler=r,this.pendingWork=[],this.throttler=this._register(new O.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(i){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+i.length>this.options.maxBufferedWork)return!1}else if(this.pending+i.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...i),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new G(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=se,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=u=>{(0,v.setTimeout0)(()=>{if(i)return;const r=Date.now()+15;u(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:e.runWhenIdle=(u,i)=>{const r=requestIdleCallback(u,typeof i=="number"?{timeout:i}:void 0);let l=!1;return{dispose(){l||(l=!0,cancelIdleCallback(r))}}}}();class ${constructor(i){this._didRun=!1,this._executor=()=>{try{this._value=i()}catch(r){this._error=r}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=$;async function x(u,i,r){let l;for(let h=0;h<r;h++)try{return await u()}catch(y){l=y,await f(i)}throw l}e.retry=x;class K{hasPending(i){return this._pending?typeof i=="number"?this._pending.taskId===i:!!this._pending:!1}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){this._pending?.cancel()}setPending(i,r,l){return this._pending={taskId:i,cancel:()=>l?.(),promise:r},r.then(()=>this.donePending(i),()=>this.donePending(i)),r}donePending(i){this._pending&&i===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const i=this._next;this._next=void 0,i.run().then(i.promiseResolve,i.promiseReject)}}setNext(i){if(this._next)this._next.run=i;else{let r,l;const h=new Promise((y,W)=>{r=y,l=W});this._next={run:i,promise:h,promiseResolve:r,promiseReject:l}}return this._next.promise}}e.TaskSequentializer=K;class ee{constructor(i,r=()=>Date.now()){this.interval=i,this.nowFn=r,this.lastIncrementTime=0,this.value=0}increment(){const i=this.nowFn();return i-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=i,this.value=0),this.value++,this.value}}e.IntervalCounter=ee;class m{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((i,r)=>{this.completeCallback=i,this.errorCallback=r})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(i){return new Promise(r=>{this.completeCallback(i),this.resolved=!0,r()})}error(i){return new Promise(r=>{this.errorCallback(i),this.rejected=!0,r()})}cancel(){new Promise(i=>{this.errorCallback(new A.CancellationError),this.rejected=!0,i()})}}e.DeferredPromise=m;var P;(function(u){async function i(l){let h;const y=await Promise.all(l.map(W=>W.then(Q=>Q,Q=>{h||(h=Q)})));if(typeof h!="undefined")throw h;return y}u.settled=i;function r(l){return new Promise(async(h,y)=>{try{await l(h,y)}catch(W){y(W)}})}u.withAsyncBody=r})(P=e.Promises||(e.Promises={}));var d;(function(u){u[u.Initial=0]="Initial",u[u.DoneOK=1]="DoneOK",u[u.DoneError=2]="DoneError"})(d||(d={}));class w{constructor(i){this._state=0,this._results=[],this._error=null,this._onStateChanged=new S.Emitter,queueMicrotask(async()=>{const r={emitOne:l=>this.emitOne(l),emitMany:l=>this.emitMany(l),reject:l=>this.reject(l)};try{await Promise.resolve(i(r)),this.resolve()}catch(l){this.reject(l)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}static fromArray(i){return new w(r=>{r.emitMany(i)})}static fromPromise(i){return new w(async r=>{r.emitMany(await i)})}static fromPromises(i){return new w(async r=>{await Promise.all(i.map(async l=>r.emitOne(await l)))})}static merge(i){return new w(async r=>{await Promise.all(i.map(async l=>{for await(const h of l)r.emitOne(h)}))})}[Symbol.asyncIterator](){let i=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(i<this._results.length)return{done:!1,value:this._results[i++]};if(this._state===1)return{done:!0,value:void 0};await S.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(i,r){return new w(async l=>{for await(const h of i)l.emitOne(r(h))})}map(i){return w.map(this,i)}static filter(i,r){return new w(async l=>{for await(const h of i)r(h)&&l.emitOne(h)})}filter(i){return w.filter(this,i)}static coalesce(i){return w.filter(i,r=>!!r)}coalesce(){return w.coalesce(this)}static async toPromise(i){const r=[];for await(const l of i)r.push(l);return r}toPromise(){return w.toPromise(this)}emitOne(i){this._state===0&&(this._results.push(i),this._onStateChanged.fire())}emitMany(i){this._state===0&&(this._results=this._results.concat(i),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(i){this._state===0&&(this._state=2,this._error=i,this._onStateChanged.fire())}}e.AsyncIterableObject=w,w.EMPTY=w.fromArray([]);class E extends w{constructor(i,r){super(r);this._source=i}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=E;function D(u){const i=new L.CancellationTokenSource,r=u(i.token);return new E(i,async l=>{const h=i.token.onCancellationRequested(()=>{h.dispose(),i.dispose(),l.reject(new A.CancellationError)});try{for await(const y of r){if(i.token.isCancellationRequested)return;l.emitOne(y)}h.dispose(),i.dispose()}catch(y){h.dispose(),i.dispose(),l.reject(y)}})}e.createCancelableAsyncIterable=D}),define(ie[9],ne([0,1,11,8,5,10,4,3,2]),function(te,e,L,A,S,O,b,v,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function M(){return Object.create(null)}e.getEmptyExpression=M,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const C="[/\\\\]",j="[^/\\\\]",H=/\//g;function q(m,P){switch(m){case 0:return"";case 1:return`${j}*?`;default:return`(?:${C}|${j}+${C}${P?`|${C}${j}+`:""})*?`}}function o(m,P){if(!m)return[];const d=[];let w=!1,E=!1,D="";for(const u of m){switch(u){case P:if(!w&&!E){d.push(D),D="";continue}break;case"{":w=!0;break;case"}":w=!1;break;case"[":E=!0;break;case"]":E=!1;break}D+=u}return D&&d.push(D),d}e.splitGlobAware=o;function g(m){if(!m)return"";let P="";const d=o(m,e.GLOB_SPLIT);if(d.every(w=>w===e.GLOBSTAR))P=".*";else{let w=!1;d.forEach((E,D)=>{if(E===e.GLOBSTAR){if(w)return;P+=q(2,D===d.length-1)}else{let u=!1,i="",r=!1,l="";for(const h of E){if(h!=="}"&&u){i+=h;continue}if(r&&(h!=="]"||!l)){let y;h==="-"?y=h:(h==="^"||h==="!")&&!l?y="^":h===e.GLOB_SPLIT?y="":y=(0,R.escapeRegExpCharacters)(h),l+=y;continue}switch(h){case"{":u=!0;continue;case"[":r=!0;continue;case"}":{P+=`(?:${o(i,",").map(Q=>g(Q)).join("|")})`,u=!1,i="";break}case"]":{P+="["+l+"]",r=!1,l="";break}case"?":P+=j;continue;case"*":P+=q(1);continue;default:P+=(0,R.escapeRegExpCharacters)(h)}}D<d.length-1&&(d[D+1]!==e.GLOBSTAR||D+2<d.length)&&(P+=C)}w=E===e.GLOBSTAR})}return P}const p=/^\*\*\/\*\.[\w\.-]+$/,F=/^\*\*\/([\w\.-]+)\/?$/,z=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,T=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,N=/^\*\*((\/[\w\.-]+)+)\/?$/,Y=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,I=new O.LRUCache(1e4),U=function(){return!1},f=function(){return null};function t(m,P){if(!m)return f;let d;typeof m!="string"?d=m.pattern:d=m,d=d.trim();const w=`${d}_${!!P.trimForExclusions}`;let E=I.get(w);if(E)return n(E,m);let D;return p.test(d)?E=a(d.substr(4),d):(D=F.exec(s(d,P)))?E=c(D[1],d):(P.trimForExclusions?T:z).test(d)?E=k(d,P):(D=N.exec(s(d,P)))?E=_(D[1].substr(1),d,!0):(D=Y.exec(s(d,P)))?E=_(D[1],d,!1):E=B(d),I.set(w,E),n(E,m)}function n(m,P){if(typeof P=="string")return m;const d=function(w,E){return(0,S.isEqualOrParent)(w,P.base,!v.isLinux)?m(w.substr(P.base.length+1),E):null};return d.allBasenames=m.allBasenames,d.allPaths=m.allPaths,d.basenames=m.basenames,d.patterns=m.patterns,d}function s(m,P){return P.trimForExclusions&&m.endsWith("/**")?m.substr(0,m.length-2):m}function a(m,P){return function(d,w){return typeof d=="string"&&d.endsWith(m)?P:null}}function c(m,P){const d=`/${m}`,w=`\\${m}`,E=function(u,i){return typeof u!="string"?null:i?i===m?P:null:u===m||u.endsWith(d)||u.endsWith(w)?P:null},D=[m];return E.basenames=D,E.patterns=[P],E.allBasenames=D,E}function k(m,P){const d=K(m.slice(1,-1).split(",").map(i=>t(i,P)).filter(i=>i!==f),m),w=d.length;if(!w)return f;if(w===1)return d[0];const E=function(i,r){for(let l=0,h=d.length;l<h;l++)if(d[l](i,r))return m;return null},D=d.find(i=>!!i.allBasenames);D&&(E.allBasenames=D.allBasenames);const u=d.reduce((i,r)=>r.allPaths?i.concat(r.allPaths):i,[]);return u.length&&(E.allPaths=u),E}function _(m,P,d){const w=b.sep===b.posix.sep,E=w?m:m.replace(H,b.sep),D=b.sep+E,u=b.posix.sep+m;let i;return d?i=function(r,l){return typeof r=="string"&&(r===E||r.endsWith(D)||!w&&(r===m||r.endsWith(u)))?P:null}:i=function(r,l){return typeof r=="string"&&(r===E||!w&&r===m)?P:null},i.allPaths=[(d?"*/":"./")+m],i}function B(m){try{const P=new RegExp(`^${g(m)}$`);return function(d){return P.lastIndex=0,typeof d=="string"&&P.test(d)?m:null}}catch{return f}}function X(m,P,d){return!m||typeof P!="string"?!1:G(m)(P,void 0,d)}e.match=X;function G(m,P={}){if(!m)return U;if(typeof m=="string"||V(m)){const d=t(m,P);if(d===f)return U;const w=function(E,D){return!!d(E,D)};return d.allBasenames&&(w.allBasenames=d.allBasenames),d.allPaths&&(w.allPaths=d.allPaths),w}return $(m,P)}e.parse=G;function V(m){const P=m;return P?typeof P.base=="string"&&typeof P.pattern=="string":!1}e.isRelativePattern=V;function J(m){return m.allBasenames||[]}e.getBasenameTerms=J;function se(m){return m.allPaths||[]}e.getPathTerms=se;function $(m,P){const d=K(Object.getOwnPropertyNames(m).map(i=>x(i,m[i],P)).filter(i=>i!==f)),w=d.length;if(!w)return f;if(!d.some(i=>!!i.requiresSiblings)){if(w===1)return d[0];const i=function(h,y){let W;for(let Q=0,Z=d.length;Q<Z;Q++){const re=d[Q](h,y);if(typeof re=="string")return re;(0,A.isThenable)(re)&&(W||(W=[]),W.push(re))}return W?(async()=>{for(const Q of W){const Z=await Q;if(typeof Z=="string")return Z}return null})():null},r=d.find(h=>!!h.allBasenames);r&&(i.allBasenames=r.allBasenames);const l=d.reduce((h,y)=>y.allPaths?h.concat(y.allPaths):h,[]);return l.length&&(i.allPaths=l),i}const E=function(i,r,l){let h,y;for(let W=0,Q=d.length;W<Q;W++){const Z=d[W];Z.requiresSiblings&&l&&(r||(r=(0,b.basename)(i)),h||(h=r.substr(0,r.length-(0,b.extname)(i).length)));const re=Z(i,r,h,l);if(typeof re=="string")return re;(0,A.isThenable)(re)&&(y||(y=[]),y.push(re))}return y?(async()=>{for(const W of y){const Q=await W;if(typeof Q=="string")return Q}return null})():null},D=d.find(i=>!!i.allBasenames);D&&(E.allBasenames=D.allBasenames);const u=d.reduce((i,r)=>r.allPaths?i.concat(r.allPaths):i,[]);return u.length&&(E.allPaths=u),E}function x(m,P,d){if(P===!1)return f;const w=t(m,d);if(w===f)return f;if(typeof P=="boolean")return w;if(P){const E=P.when;if(typeof E=="string"){const D=(u,i,r,l)=>{if(!l||!w(u,i))return null;const h=E.replace("$(basename)",r),y=l(h);return(0,A.isThenable)(y)?y.then(W=>W?m:null):y?m:null};return D.requiresSiblings=!0,D}}return w}function K(m,P){const d=m.filter(i=>!!i.basenames);if(d.length<2)return m;const w=d.reduce((i,r)=>{const l=r.basenames;return l?i.concat(l):i},[]);let E;if(P){E=[];for(let i=0,r=w.length;i<r;i++)E.push(P)}else E=d.reduce((i,r)=>{const l=r.patterns;return l?i.concat(l):i},[]);const D=function(i,r){if(typeof i!="string")return null;if(!r){let h;for(h=i.length;h>0;h--){const y=i.charCodeAt(h-1);if(y===47||y===92)break}r=i.substr(h)}const l=w.indexOf(r);return l!==-1?E[l]:null};D.basenames=w,D.patterns=E,D.allBasenames=w;const u=m.filter(i=>!i.basenames);return u.push(D),u}function ee(m,P){return(0,L.equals)(m,P,(d,w)=>typeof d=="string"&&typeof w=="string"?d===w:typeof d!="string"&&typeof w!="string"?d.base===w.base&&d.pattern===w.pattern:!1)}e.patternsEquals=ee}),define(ie[14],ne([0,1,20]),function(te,e,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFileResults=void 0;const A=(S,O,b)=>{let v;if(S[0]===255&&S[1]===254)v=new TextDecoder("utf-16le").decode(S);else if(S[0]===254&&S[1]===255)v=new TextDecoder("utf-16be").decode(S);else if(v=new TextDecoder("utf8").decode(S),v.slice(0,1e3).includes("\uFFFD")&&S.includes(0))return[];const R=[],M=[];let C=null,j=b.remainingResultQuota;for(;j>=0&&(C=O.exec(v));)M.push({matchStartIndex:C.index,matchedText:C[0]}),j--;if(M.length){const H=new Set,q=new Set,o=[],g=N=>v.slice(o[N].start,o[N].end);let p=0,F=null;const z=/\r?\n/g;for(;F=z.exec(v);)o.push({start:p,end:F.index}),p=F.index+F[0].length;p<v.length&&o.push({start:p,end:v.length});let T=0;for(const{matchStartIndex:N,matchedText:Y}of M){if(j<0)break;for(;Boolean(o[T+1])&&N>o[T].end;)T++;let I=T;for(;Boolean(o[I+1])&&N+Y.length>o[I].end;)I++;if(b.beforeContext)for(let a=Math.max(0,T-b.beforeContext);a<T;a++)H.add(a);let U="",f=0;for(let a=T;a<=I;a++){let c=g(a);b.previewOptions?.charsPerLine&&c.length>b.previewOptions.charsPerLine&&(f=Math.max(N-o[T].start-20,0),c=c.substr(f,b.previewOptions.charsPerLine)),U+=`${c}
`,q.add(a)}const t=new L.Range(T,N-o[T].start,I,N+Y.length-o[I].start),n=new L.Range(0,N-o[T].start-f,I-T,N+Y.length-o[I].start-(I===T?f:0)),s={ranges:t,preview:{text:U,matches:n}};if(R.push(s),b.afterContext)for(let a=I+1;a<=Math.min(I+b.afterContext,o.length-1);a++)H.add(a)}for(const N of H)q.has(N)||R.push({text:g(N),lineNumber:N+1})}return R};e.getFileResults=A}),define(ie[15],ne([0,1,9]),function(te,e,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreFile=void 0;class A{constructor(O,b,v){if(this.location=b,this.parent=v,b[b.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");b[b.length-1]!=="/"&&(b+="/"),this.isPathIgnored=this.parseIgnoreFile(O,this.location,this.parent)}updateContents(O){this.isPathIgnored=this.parseIgnoreFile(O,this.location,this.parent)}isPathIncludedInTraversal(O,b){if(O[0]!=="/"||O[O.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+O);return!this.isPathIgnored(O,b)}isArbitraryPathIgnored(O,b){if(O[0]!=="/"||O[O.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+O);const v=O.split("/").filter(C=>C);let R=!1,M="";for(let C=0;C<v.length;C++){const j=C===v.length-1,H=v[C];if(M=M+"/"+H,!this.isPathIncludedInTraversal(M,j?b:!0)){R=!0;break}}return R}gitignoreLinesToExpression(O,b,v){const R=O.map(C=>this.gitignoreLineToGlob(C,b)),M=Object.create(null);for(const C of R)M[C]=!0;return L.parse(M,{trimForExclusions:v})}parseIgnoreFile(O,b,v){const R=O.split(`
`).map(T=>T.trim()).filter(T=>T&&T[0]!=="#"),M=R.filter(T=>!T.endsWith("/")),C=M.filter(T=>!T.includes("!")),j=this.gitignoreLinesToExpression(C,b,!0),H=M.filter(T=>T.includes("!")).map(T=>T.replace(/!/g,"")),q=this.gitignoreLinesToExpression(H,b,!1),o=R.filter(T=>!T.includes("!")),g=this.gitignoreLinesToExpression(o,b,!0),p=R.filter(T=>T.includes("!")).map(T=>T.replace(/!/g,"")),F=this.gitignoreLinesToExpression(p,b,!1);return(T,N)=>T.startsWith(b)?N&&g(T)&&!F(T)||j(T)&&!q(T)?!0:v?v.isPathIgnored(T,N):!1:!1}gitignoreLineToGlob(O,b){const v=O.indexOf("/");return v===-1||v===O.length-1?O="**/"+O:(v===0&&(O=O.slice(1)),O=b+O),O}}e.IgnoreFile=A}),define(ie[21],ne([0,1,9,6,4,13,14,15,2,8,7]),function(te,e,L,A,S,O,b,v,R,M,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const j=!1,H=+new Date,q={},o=async(I,U)=>{if(!j)return U();const f=Date.now(),t=(q[I]??0)+1;console.info(I,t,"starting",Math.round((f-H)*10)/1e4),q[I]=t;const n=await U(),s=Date.now();return console.info(I,t,"took",s-f),n};function g(I){return new p(I)}e.create=g;class p{constructor(U){this.host=U,this.cancellationTokens=new Map}cancelQuery(U){this.cancellationTokens.get(U)?.cancel()}registerCancellationToken(U){const f=new O.CancellationTokenSource;return this.cancellationTokens.set(U,f),f}async listDirectory(U,f,t,n,s){const a=z(t),c=new C.ExtUri(()=>n),k=this.registerCancellationToken(s),_=[];let B=!1,X=0;const G=f.maxResults||512,V=f.filePattern?J=>f.filePattern.split("").every(se=>J.includes(se)):J=>!0;return await o("listDirectory",()=>this.walkFolderQuery(U,T(f),a,c,J=>{if(!!V(J.name))return X++,G&&X>G&&(B=!0,k.cancel()),_.push(J.path)},k.token)),{results:_,limitHit:B}}async searchDirectory(U,f,t,n,s){const a=z(t),c=new C.ExtUri(()=>n);return o("searchInFiles",async()=>{const k=this.registerCancellationToken(s),_=[],B=F(f.contentPattern),X=[];let G=0,V=0;const J=!1,se=async $=>{if(k.token.isCancellationRequested)return;G++;const x=await $.resolve();if(k.token.isCancellationRequested)return;const K=new Uint8Array(x),ee=(0,b.getFileResults)(K,B,{afterContext:f.afterContext??0,beforeContext:f.beforeContext??0,previewOptions:f.previewOptions,remainingResultQuota:f.maxResults?f.maxResults-V:1e4});if(ee.length){V+=ee.length,f.maxResults&&V>f.maxResults&&k.cancel();const m={resource:A.URI.joinPath(a.folder,$.path),results:ee};this.host.sendTextSearchMatch(m,s),_.push(m)}};return await o("walkFolderToResolve",()=>this.walkFolderQuery(U,T(f),a,c,async $=>X.push(se($)),k.token)),await o("resolveOngoingProcesses",()=>Promise.all(X)),j&&console.log("Searched in",G,"files"),{results:_,limitHit:J}})}async walkFolderQuery(U,f,t,n,s,a){const c=L.parse(t.excludePattern??{},{trimForExclusions:!0}),k=($,x,K)=>($=$.slice(1),!!(c($,x,K)||N(f,$))),_=($,x,K)=>($=$.slice(1),!(c($,x,K)||!Y(f,$,n))),B=($,x)=>({type:"file",name:$.name,path:x,resolve:()=>$.getFile().then(ee=>ee.arrayBuffer())}),X=$=>$.kind==="directory",G=$=>$.kind==="file",V=async($,x,K)=>{if(!t.disregardIgnoreFiles){const m=await Promise.all([$.getFileHandle(".gitignore").catch(P=>{}),$.getFileHandle(".ignore").catch(P=>{})]);await Promise.all(m.map(async P=>{if(!P)return;const d=new TextDecoder("utf8").decode(new Uint8Array(await(await P.getFile()).arrayBuffer()));K=new v.IgnoreFile(d,x,K)}))}const ee=M.Promises.withAsyncBody(async m=>{const P=[],d=[],w=[],E=new Set;for await(const D of $.entries())w.push(D),E.add(D[0]);for(const[D,u]of w){if(a.isCancellationRequested)break;const i=x+D;if(K&&!K.isPathIncludedInTraversal(i,u.kind==="directory"))continue;const r=l=>E.has(l);X(u)&&!k(i,D,r)?d.push(V(u,i+"/",K)):G(u)&&_(i,D,r)&&P.push(B(u,i))}m([...await Promise.all(d),...P])});return{type:"dir",name:$.name,entries:ee}},J=async($,x)=>{a.isCancellationRequested||await Promise.all((await $.entries).sort((K,ee)=>-(K.type==="dir"?0:1)+(ee.type==="dir"?0:1)).map(async K=>K.type==="dir"?J(K,x):x(K)))},se=await o("process",()=>V(U,"/"));await o("resolve",()=>J(se,s))}}e.LocalFileSearchSimpleWorker=p;function F(I){return(0,R.createRegExp)(I.pattern,!!I.isRegExp,{wholeWord:I.isWordMatch,global:!0,matchCase:I.isCaseSensitive,multiline:!0,unicode:!0})}function z(I){return{...I,folder:A.URI.revive(I.folder)}}function T(I){return{...I,extraFileResources:I.extraFileResources?.map(U=>A.URI.revive(U)),folderQueries:I.folderQueries.map(U=>z(U))}}function N(I,U){return!!(I.excludePattern&&L.match(I.excludePattern,U))}function Y(I,U,f){return I.excludePattern&&L.match(I.excludePattern,U)?!1:I.includePattern||I.usingSearchPaths?I.includePattern&&L.match(I.includePattern,U)?!0:I.usingSearchPaths?!!I.folderQueries&&I.folderQueries.some(t=>{const n=t.folder,s=A.URI.file(U);if(f.isEqualOrParent(s,n)){const a=S.relative(n.path,s.path);return!t.includePattern||!!L.match(t.includePattern,a)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=localFileSearch.js.map
