/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/strings","vs/base/common/platform","vs/base/common/path","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/mime","vs/base/common/stream","vs/base/common/errors","vs/base/common/map","vs/base/common/arrays","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/eolCounter","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/types","vs/base/common/cancellation","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ie=function(te){for(var e=[],M=0,F=te.length;M<F;M++)e[M]=ne[te[M]];return e};define(ne[12],ie([0,1,4]),function(te,e,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeMimeType=e.getExtensionForMimeType=e.getMediaMime=e.getMediaOrTextMime=e.Mimes=void 0,e.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const F={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},q={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function N(I){const P=(0,M.extname)(I),L=F[P.toLowerCase()];return L!==void 0?L:O(I)}e.getMediaOrTextMime=N;function O(I){const P=(0,M.extname)(I);return q[P.toLowerCase()]}e.getMediaMime=O;function A(I){for(const P in q)if(q[P]===I)return P}e.getExtensionForMimeType=A;const R=/^(.+)\/(.+?)(;.+)?$/;function w(I,P){const L=R.exec(I);return L?`${L[1].toLowerCase()}/${L[2].toLowerCase()}${L[3]??""}`:P?void 0:I}e.normalizeMimeType=w}),define(ne[13],ie([0,1,14,6]),function(te,e,M,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=e.isReadable=void 0;function q(h){const c=h;return c?typeof c.read=="function":!1}e.isReadable=q;function N(h){const c=h;return c?[c.on,c.pause,c.resume,c.destroy].every(m=>typeof m=="function"):!1}e.isReadableStream=N;function O(h){const c=h;return c?N(c.stream)&&Array.isArray(c.buffer)&&typeof c.ended=="boolean":!1}e.isReadableBufferedStream=O;function A(h,c){return new R(h,c)}e.newWriteableStream=A;class R{constructor(c,m){this.reducer=c,this.options=m,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(c){if(!this.state.destroyed){if(this.state.flowing)this.emitData(c);else if(this.buffer.data.push(c),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(m=>this.pendingWritePromises.push(m))}}error(c){this.state.destroyed||(this.state.flowing?this.emitError(c):this.buffer.error.push(c))}end(c){this.state.destroyed||(typeof c!="undefined"&&this.write(c),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(c){this.listeners.data.slice(0).forEach(m=>m(c))}emitError(c){this.listeners.error.length===0?(0,M.onUnexpectedError)(c):this.listeners.error.slice(0).forEach(m=>m(c))}emitEnd(){this.listeners.end.slice(0).forEach(c=>c())}on(c,m){if(!this.state.destroyed)switch(c){case"data":this.listeners.data.push(m),this.resume();break;case"end":this.listeners.end.push(m),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(m),this.state.flowing&&this.flowErrors();break}}removeListener(c,m){if(this.state.destroyed)return;let y;switch(c){case"data":y=this.listeners.data;break;case"end":y=this.listeners.end;break;case"error":y=this.listeners.error;break}if(y){const _=y.indexOf(m);_>=0&&y.splice(_,1)}}flowData(){if(this.buffer.data.length>0){const c=this.reducer(this.buffer.data);this.emitData(c),this.buffer.data.length=0;const m=[...this.pendingWritePromises];this.pendingWritePromises.length=0,m.forEach(y=>y())}}flowErrors(){if(this.listeners.error.length>0){for(const c of this.buffer.error)this.emitError(c);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function w(h,c){const m=[];let y;for(;(y=h.read())!==null;)m.push(y);return c(m)}e.consumeReadable=w;function I(h,c,m){const y=[];let _;for(;(_=h.read())!==null&&y.length<m;)y.push(_);return _===null&&y.length>0?c(y):{read:()=>{if(y.length>0)return y.shift();if(typeof _!="undefined"){const a=_;return _=void 0,a}return h.read()}}}e.peekReadable=I;function P(h,c){return new Promise((m,y)=>{const _=[];L(h,{onData:a=>{c&&_.push(a)},onError:a=>{c?y(a):m(void 0)},onEnd:()=>{m(c?c(_):void 0)}})})}e.consumeStream=P;function L(h,c){let m=!1;return h.on("error",y=>{m||c.onError(y)}),h.on("end",()=>{m||c.onEnd()}),h.on("data",y=>{m||c.onData(y)}),(0,F.toDisposable)(()=>m=!0)}e.listenStream=L;function T(h,c){return new Promise((m,y)=>{const _=new F.DisposableStore,a=[],l=f=>{if(a.push(f),a.length>c)return _.dispose(),h.pause(),m({stream:h,buffer:a,ended:!1})},r=f=>y(f),u=()=>m({stream:h,buffer:a,ended:!0});_.add((0,F.toDisposable)(()=>h.removeListener("error",r))),h.on("error",r),_.add((0,F.toDisposable)(()=>h.removeListener("end",u))),h.on("end",u),_.add((0,F.toDisposable)(()=>h.removeListener("data",l))),h.on("data",l)})}e.peekStream=T;function b(h,c){const m=A(c);return m.end(h),m}e.toStream=b;function d(){const h=A(()=>{throw new Error("not supported")});return h.end(),h}e.emptyStream=d;function o(h){let c=!1;return{read:()=>c?null:(c=!0,h)}}e.toReadable=o;function t(h,c,m){const y=A(m);return L(h,{onData:_=>y.write(c.data(_)),onError:_=>y.error(c.error?c.error(_):_),onEnd:()=>y.end()}),y}e.transform=t;function s(h,c,m){let y=!1;return{read:()=>{const _=c.read();return y?_:(y=!0,_!==null?m([h,_]):h)}}}e.prefixedReadable=s;function i(h,c,m){let y=!1;const _=A(m);return L(c,{onData:a=>y?_.write(a):(y=!0,_.write(m([h,a]))),onError:a=>_.error(a),onEnd:()=>{y||(y=!0,_.write(h)),_.end()}}),_}e.prefixedStream=i}),define(ne[5],ie([0,1,13]),function(te,e,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const F=typeof Buffer!="undefined";let q,N;class O{constructor(f){this.buffer=f,this.byteLength=this.buffer.byteLength}static alloc(f){return F?new O(Buffer.allocUnsafe(f)):new O(new Uint8Array(f))}static wrap(f){return F&&!Buffer.isBuffer(f)&&(f=Buffer.from(f.buffer,f.byteOffset,f.byteLength)),new O(f)}static fromString(f,C){return!(C?.dontUseNodeBuffer||!1)&&F?new O(Buffer.from(f)):(q||(q=new TextEncoder),new O(q.encode(f)))}static fromByteArray(f){const C=O.alloc(f.length);for(let S=0,$=f.length;S<$;S++)C.buffer[S]=f[S];return C}static concat(f,C){if(typeof C=="undefined"){C=0;for(let j=0,B=f.length;j<B;j++)C+=f[j].byteLength}const S=O.alloc(C);let $=0;for(let j=0,B=f.length;j<B;j++){const n=f[j];S.set(n,$),$+=n.byteLength}return S}clone(){const f=O.alloc(this.byteLength);return f.set(this),f}toString(){return F?this.buffer.toString():(N||(N=new TextDecoder),N.decode(this.buffer))}slice(f,C){return new O(this.buffer.subarray(f,C))}set(f,C){if(f instanceof O)this.buffer.set(f.buffer,C);else if(f instanceof Uint8Array)this.buffer.set(f,C);else if(f instanceof ArrayBuffer)this.buffer.set(new Uint8Array(f),C);else if(ArrayBuffer.isView(f))this.buffer.set(new Uint8Array(f.buffer,f.byteOffset,f.byteLength),C);else throw new Error("Unknown argument 'array'")}readUInt32BE(f){return w(this.buffer,f)}writeUInt32BE(f,C){I(this.buffer,f,C)}readUInt32LE(f){return P(this.buffer,f)}writeUInt32LE(f,C){L(this.buffer,f,C)}readUInt8(f){return T(this.buffer,f)}writeUInt8(f,C){b(this.buffer,f,C)}}e.VSBuffer=O;function A(u,f){return u[f+0]<<0>>>0|u[f+1]<<8>>>0}e.readUInt16LE=A;function R(u,f,C){u[C+0]=f&255,f=f>>>8,u[C+1]=f&255}e.writeUInt16LE=R;function w(u,f){return u[f]*2**24+u[f+1]*2**16+u[f+2]*2**8+u[f+3]}e.readUInt32BE=w;function I(u,f,C){u[C+3]=f,f=f>>>8,u[C+2]=f,f=f>>>8,u[C+1]=f,f=f>>>8,u[C]=f}e.writeUInt32BE=I;function P(u,f){return u[f+0]<<0>>>0|u[f+1]<<8>>>0|u[f+2]<<16>>>0|u[f+3]<<24>>>0}e.readUInt32LE=P;function L(u,f,C){u[C+0]=f&255,f=f>>>8,u[C+1]=f&255,f=f>>>8,u[C+2]=f&255,f=f>>>8,u[C+3]=f&255}e.writeUInt32LE=L;function T(u,f){return u[f]}e.readUInt8=T;function b(u,f,C){u[C]=f}e.writeUInt8=b;function d(u){return M.consumeReadable(u,f=>O.concat(f))}e.readableToBuffer=d;function o(u){return M.toReadable(u)}e.bufferToReadable=o;function t(u){return M.consumeStream(u,f=>O.concat(f))}e.streamToBuffer=t;async function s(u){return u.ended?O.concat(u.buffer):O.concat([...u.buffer,await t(u.stream)])}e.bufferedStreamToBuffer=s;function i(u){return M.toStream(u,f=>O.concat(f))}e.bufferToStream=i;function h(u){return M.transform(u,{data:f=>typeof f=="string"?O.fromString(f):O.wrap(f)},f=>O.concat(f))}e.streamToBufferReadableStream=h;function c(u){return M.newWriteableStream(f=>O.concat(f),u)}e.newWriteableBufferStream=c;function m(u,f){return M.prefixedReadable(u,f,C=>O.concat(C))}e.prefixedBufferReadable=m;function y(u,f){return M.prefixedStream(u,f,C=>O.concat(C))}e.prefixedBufferStream=y;function _(u){let f=0,C=0,S=0;const $=new Uint8Array(Math.floor(u.length/4*3)),j=n=>{switch(C){case 3:$[S++]=f|n,C=0;break;case 2:$[S++]=f|n>>>2,f=n<<6,C=3;break;case 1:$[S++]=f|n>>>4,f=n<<4,C=2;break;default:f=n<<2,C=1}};for(let n=0;n<u.length;n++){const p=u.charCodeAt(n);if(p>=65&&p<=90)j(p-65);else if(p>=97&&p<=122)j(p-97+26);else if(p>=48&&p<=57)j(p-48+52);else if(p===43||p===45)j(62);else if(p===47||p===95)j(63);else{if(p===61)break;throw new SyntaxError(`Unexpected base64 character ${u[n]}`)}}const B=S;for(;C>0;)j(0);return O.wrap($).slice(0,B)}e.decodeBase64=_;const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function r({buffer:u},f=!0,C=!1){const S=C?l:a;let $="";const j=u.byteLength%3;let B=0;for(;B<u.byteLength-j;B+=3){const n=u[B+0],p=u[B+1],E=u[B+2];$+=S[n>>>2],$+=S[(n<<4|p>>>4)&63],$+=S[(p<<2|E>>>6)&63],$+=S[E&63]}if(j===1){const n=u[B+0];$+=S[n>>>2],$+=S[n<<4&63],f&&($+="==")}else if(j===2){const n=u[B+0],p=u[B+1];$+=S[n>>>2],$+=S[(n<<4|p>>>4)&63],$+=S[p<<2&63],f&&($+="=")}return $}e.encodeBase64=r}),define(ne[15],ie([0,1,16,2]),function(te,e,M,F){"use strict";var q,N,O;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.TernarySearchTree=e.UriIterator=e.PathIterator=e.ConfigKeysIterator=e.StringIterator=e.setToString=e.mapToString=e.getOrSet=void 0;function A(_,a,l){let r=_.get(a);return r===void 0&&(r=l,_.set(a,r)),r}e.getOrSet=A;function R(_){const a=[];return _.forEach((l,r)=>{a.push(`${r} => ${l}`)}),`Map(${_.size}) {${a.join(", ")}}`}e.mapToString=R;function w(_){const a=[];return _.forEach(l=>{a.push(l)}),`Set(${_.size}) {${a.join(", ")}}`}e.setToString=w;class I{constructor(){this._value="",this._pos=0}reset(a){return this._value=a,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(a){const l=a.charCodeAt(0),r=this._value.charCodeAt(this._pos);return l-r}value(){return this._value[this._pos]}}e.StringIterator=I;class P{constructor(a=!0){this._caseSensitive=a}reset(a){return this._value=a,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let a=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(a)this._from++;else break;else a=!1;return this}cmp(a){return this._caseSensitive?(0,F.compareSubstring)(a,this._value,0,a.length,this._from,this._to):(0,F.compareSubstringIgnoreCase)(a,this._value,0,a.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.ConfigKeysIterator=P;class L{constructor(a=!0,l=!0){this._splitOnBackslash=a,this._caseSensitive=l}reset(a){this._from=0,this._to=0,this._value=a,this._valueLen=a.length;for(let l=a.length-1;l>=0;l--,this._valueLen--){const r=this._value.charCodeAt(l);if(!(r===47||this._splitOnBackslash&&r===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let a=!0;for(;this._to<this._valueLen;this._to++){const l=this._value.charCodeAt(this._to);if(l===47||this._splitOnBackslash&&l===92)if(a)this._from++;else break;else a=!1}return this}cmp(a){return this._caseSensitive?(0,F.compareSubstring)(a,this._value,0,a.length,this._from,this._to):(0,F.compareSubstringIgnoreCase)(a,this._value,0,a.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.PathIterator=L;var T;(function(_){_[_.Scheme=1]="Scheme",_[_.Authority=2]="Authority",_[_.Path=3]="Path",_[_.Query=4]="Query",_[_.Fragment=5]="Fragment"})(T||(T={}));class b{constructor(a,l){this._ignorePathCasing=a,this._ignoreQueryAndFragment=l,this._states=[],this._stateIdx=0}reset(a){return this._value=a,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new L(!1,!this._ignorePathCasing(a)),this._pathIterator.reset(a.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(a)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(a){if(this._states[this._stateIdx]===1)return(0,F.compareIgnoreCase)(a,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,F.compareIgnoreCase)(a,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(a);if(this._states[this._stateIdx]===4)return(0,F.compare)(a,this._value.query);if(this._states[this._stateIdx]===5)return(0,F.compare)(a,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}e.UriIterator=b;class d{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const a=this.right;return this.right=a.left,a.left=this,this.updateHeight(),a.updateHeight(),a}rotateRight(){const a=this.left;return this.left=a.right,a.right=this,this.updateHeight(),a.updateHeight(),a}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var o;(function(_){_[_.Left=-1]="Left",_[_.Mid=0]="Mid",_[_.Right=1]="Right"})(o||(o={}));class t{constructor(a){this._iter=a}static forUris(a=()=>!1,l=()=>!1){return new t(new b(a,l))}static forPaths(a=!1){return new t(new L(void 0,!a))}static forStrings(){return new t(new I)}static forConfigKeys(){return new t(new P)}clear(){this._root=void 0}fill(a,l){if(l){const r=l.slice(0);(0,M.shuffle)(r);for(const u of r)this.set(u,a)}else{const r=a.slice(0);(0,M.shuffle)(r);for(const u of r)this.set(u[0],u[1])}}set(a,l){const r=this._iter.reset(a);let u;this._root||(this._root=new d,this._root.segment=r.value());const f=[];for(u=this._root;;){const S=r.cmp(u.segment);if(S>0)u.left||(u.left=new d,u.left.segment=r.value()),f.push([-1,u]),u=u.left;else if(S<0)u.right||(u.right=new d,u.right.segment=r.value()),f.push([1,u]),u=u.right;else if(r.hasNext())r.next(),u.mid||(u.mid=new d,u.mid.segment=r.value()),f.push([0,u]),u=u.mid;else break}const C=u.value;u.value=l,u.key=a;for(let S=f.length-1;S>=0;S--){const $=f[S][1];$.updateHeight();const j=$.balanceFactor();if(j<-1||j>1){const B=f[S][0],n=f[S+1][0];if(B===1&&n===1)f[S][1]=$.rotateLeft();else if(B===-1&&n===-1)f[S][1]=$.rotateRight();else if(B===1&&n===-1)$.right=f[S+1][1]=f[S+1][1].rotateRight(),f[S][1]=$.rotateLeft();else if(B===-1&&n===1)$.left=f[S+1][1]=f[S+1][1].rotateLeft(),f[S][1]=$.rotateRight();else throw new Error;if(S>0)switch(f[S-1][0]){case-1:f[S-1][1].left=f[S][1];break;case 1:f[S-1][1].right=f[S][1];break;case 0:f[S-1][1].mid=f[S][1];break}else this._root=f[0][1]}}return C}get(a){return this._getNode(a)?.value}_getNode(a){const l=this._iter.reset(a);let r=this._root;for(;r;){const u=l.cmp(r.segment);if(u>0)r=r.left;else if(u<0)r=r.right;else if(l.hasNext())l.next(),r=r.mid;else break}return r}has(a){const l=this._getNode(a);return!(l?.value===void 0&&l?.mid===void 0)}delete(a){return this._delete(a,!1)}deleteSuperstr(a){return this._delete(a,!0)}_delete(a,l){const r=this._iter.reset(a),u=[];let f=this._root;for(;f;){const C=r.cmp(f.segment);if(C>0)u.push([-1,f]),f=f.left;else if(C<0)u.push([1,f]),f=f.right;else if(r.hasNext())r.next(),u.push([0,f]),f=f.mid;else break}if(!!f){if(l?(f.left=void 0,f.mid=void 0,f.right=void 0,f.height=1):(f.key=void 0,f.value=void 0),!f.mid&&!f.value)if(f.left&&f.right){const C=this._min(f.right),{key:S,value:$,segment:j}=C;this._delete(C.key,!1),f.key=S,f.value=$,f.segment=j}else{const C=f.left??f.right;if(u.length>0){const[S,$]=u[u.length-1];switch(S){case-1:$.left=C;break;case 0:$.mid=C;break;case 1:$.right=C;break}}else this._root=C}for(let C=u.length-1;C>=0;C--){const S=u[C][1];S.updateHeight();const $=S.balanceFactor();if($>1?(S.right.balanceFactor()>=0||(S.right=S.right.rotateRight()),u[C][1]=S.rotateLeft()):$<-1&&(S.left.balanceFactor()<=0||(S.left=S.left.rotateLeft()),u[C][1]=S.rotateRight()),C>0)switch(u[C-1][0]){case-1:u[C-1][1].left=u[C][1];break;case 1:u[C-1][1].right=u[C][1];break;case 0:u[C-1][1].mid=u[C][1];break}else this._root=u[0][1]}}}_min(a){for(;a.left;)a=a.left;return a}findSubstr(a){const l=this._iter.reset(a);let r=this._root,u;for(;r;){const f=l.cmp(r.segment);if(f>0)r=r.left;else if(f<0)r=r.right;else if(l.hasNext())l.next(),u=r.value||u,r=r.mid;else break}return r&&r.value||u}findSuperstr(a){const l=this._iter.reset(a);let r=this._root;for(;r;){const u=l.cmp(r.segment);if(u>0)r=r.left;else if(u<0)r=r.right;else if(l.hasNext())l.next(),r=r.mid;else return r.mid?this._entries(r.mid):void 0}}forEach(a){for(const[l,r]of this)a(r,l)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(a){const l=[];return this._dfsEntries(a,l),l[Symbol.iterator]()}_dfsEntries(a,l){!a||(a.left&&this._dfsEntries(a.left,l),a.value&&l.push([a.key,a.value]),a.mid&&this._dfsEntries(a.mid,l),a.right&&this._dfsEntries(a.right,l))}_isBalanced(){const a=l=>{if(!l)return!0;const r=l.balanceFactor();return r<-1||r>1?!1:a(l.left)&&a(l.right)};return a(this._root)}}e.TernarySearchTree=t;class s{constructor(a,l){this.uri=a,this.value=l}}class i{constructor(a,l){this[q]="ResourceMap",a instanceof i?(this.map=new Map(a.map),this.toKey=l??i.defaultToKey):(this.map=new Map,this.toKey=a??i.defaultToKey)}set(a,l){return this.map.set(this.toKey(a),new s(a,l)),this}get(a){return this.map.get(this.toKey(a))?.value}has(a){return this.map.has(this.toKey(a))}get size(){return this.map.size}clear(){this.map.clear()}delete(a){return this.map.delete(this.toKey(a))}forEach(a,l){typeof l!="undefined"&&(a=a.bind(l));for(const[r,u]of this.map)a(u.value,u.uri,this)}*values(){for(const a of this.map.values())yield a.value}*keys(){for(const a of this.map.values())yield a.uri}*entries(){for(const a of this.map.values())yield[a.uri,a.value]}*[(q=Symbol.toStringTag,Symbol.iterator)](){for(const[,a]of this.map)yield[a.uri,a.value]}}e.ResourceMap=i,i.defaultToKey=_=>_.toString();class h{constructor(a,l){this[N]="ResourceSet",!a||typeof a=="function"?this._map=new i(a):(this._map=new i(l),a.forEach(this.add,this))}get size(){return this._map.size}add(a){return this._map.set(a,a),this}clear(){this._map.clear()}delete(a){return this._map.delete(a)}forEach(a,l){this._map.forEach((r,u)=>a.call(l,u,u,this))}has(a){return this._map.has(a)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(N=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=h;var c;(function(_){_[_.None=0]="None",_[_.AsOld=1]="AsOld",_[_.AsNew=2]="AsNew"})(c=e.Touch||(e.Touch={}));class m{constructor(){this[O]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(a){return this._map.has(a)}get(a,l=0){const r=this._map.get(a);if(!!r)return l!==0&&this.touch(r,l),r.value}set(a,l,r=0){let u=this._map.get(a);if(u)u.value=l,r!==0&&this.touch(u,r);else{switch(u={key:a,value:l,next:void 0,previous:void 0},r){case 0:this.addItemLast(u);break;case 1:this.addItemFirst(u);break;case 2:this.addItemLast(u);break;default:this.addItemLast(u);break}this._map.set(a,u),this._size++}return this}delete(a){return!!this.remove(a)}remove(a){const l=this._map.get(a);if(!!l)return this._map.delete(a),this.removeItem(l),this._size--,l.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const a=this._head;return this._map.delete(a.key),this.removeItem(a),this._size--,a.value}forEach(a,l){const r=this._state;let u=this._head;for(;u;){if(l?a.bind(l)(u.value,u.key,this):a(u.value,u.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");u=u.next}}keys(){const a=this,l=this._state;let r=this._head;const u={[Symbol.iterator](){return u},next(){if(a._state!==l)throw new Error("LinkedMap got modified during iteration.");if(r){const f={value:r.key,done:!1};return r=r.next,f}else return{value:void 0,done:!0}}};return u}values(){const a=this,l=this._state;let r=this._head;const u={[Symbol.iterator](){return u},next(){if(a._state!==l)throw new Error("LinkedMap got modified during iteration.");if(r){const f={value:r.value,done:!1};return r=r.next,f}else return{value:void 0,done:!0}}};return u}entries(){const a=this,l=this._state;let r=this._head;const u={[Symbol.iterator](){return u},next(){if(a._state!==l)throw new Error("LinkedMap got modified during iteration.");if(r){const f={value:[r.key,r.value],done:!1};return r=r.next,f}else return{value:void 0,done:!0}}};return u}[(O=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(a){if(a>=this.size)return;if(a===0){this.clear();return}let l=this._head,r=this.size;for(;l&&r>a;)this._map.delete(l.key),l=l.next,r--;this._head=l,this._size=r,l&&(l.previous=void 0),this._state++}addItemFirst(a){if(!this._head&&!this._tail)this._tail=a;else if(this._head)a.next=this._head,this._head.previous=a;else throw new Error("Invalid list");this._head=a,this._state++}addItemLast(a){if(!this._head&&!this._tail)this._head=a;else if(this._tail)a.previous=this._tail,this._tail.next=a;else throw new Error("Invalid list");this._tail=a,this._state++}removeItem(a){if(a===this._head&&a===this._tail)this._head=void 0,this._tail=void 0;else if(a===this._head){if(!a.next)throw new Error("Invalid list");a.next.previous=void 0,this._head=a.next}else if(a===this._tail){if(!a.previous)throw new Error("Invalid list");a.previous.next=void 0,this._tail=a.previous}else{const l=a.next,r=a.previous;if(!l||!r)throw new Error("Invalid list");l.previous=r,r.next=l}a.next=void 0,a.previous=void 0,this._state++}touch(a,l){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(l!==1&&l!==2)){if(l===1){if(a===this._head)return;const r=a.next,u=a.previous;a===this._tail?(u.next=void 0,this._tail=u):(r.previous=u,u.next=r),a.previous=void 0,a.next=this._head,this._head.previous=a,this._head=a,this._state++}else if(l===2){if(a===this._tail)return;const r=a.next,u=a.previous;a===this._head?(r.previous=void 0,this._head=r):(r.previous=u,u.next=r),a.next=void 0,a.previous=this._tail,this._tail.next=a,this._tail=a,this._state++}}}toJSON(){const a=[];return this.forEach((l,r)=>{a.push([r,l])}),a}fromJSON(a){this.clear();for(const[l,r]of a)this.set(l,r)}}e.LinkedMap=m;class y extends m{constructor(a,l=1){super();this._limit=a,this._ratio=Math.min(Math.max(0,l),1)}get limit(){return this._limit}set limit(a){this._limit=a,this.checkTrim()}get ratio(){return this._ratio}set ratio(a){this._ratio=Math.min(Math.max(0,a),1),this.checkTrim()}get(a,l=2){return super.get(a,l)}peek(a){return super.get(a,0)}set(a,l){return super.set(a,l,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=y}),define(ne[7],ie([0,1,4,3,2,31]),function(te,e,M,F,q,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function O(l){return l===47||l===92}e.isPathSeparator=O;function A(l){return l.replace(/[\\/]/g,M.posix.sep)}e.toSlashes=A;function R(l){return l.indexOf("/")===-1&&(l=A(l)),/^[a-zA-Z]:(\/|$)/.test(l)&&(l="/"+l),l}e.toPosixPath=R;function w(l,r=M.posix.sep){if(!l)return"";const u=l.length,f=l.charCodeAt(0);if(O(f)){if(O(l.charCodeAt(1))&&!O(l.charCodeAt(2))){let S=3;const $=S;for(;S<u&&!O(l.charCodeAt(S));S++);if($!==S&&!O(l.charCodeAt(S+1))){for(S+=1;S<u;S++)if(O(l.charCodeAt(S)))return l.slice(0,S+1).replace(/[\\/]/g,r)}}return r}else if(t(f)&&l.charCodeAt(1)===58)return O(l.charCodeAt(2))?l.slice(0,2)+r:l.slice(0,2);let C=l.indexOf("://");if(C!==-1){for(C+=3;C<u;C++)if(O(l.charCodeAt(C)))return l.slice(0,C+1)}return""}e.getRoot=w;function I(l){if(!F.isWindows||!l||l.length<5)return!1;let r=l.charCodeAt(0);if(r!==92||(r=l.charCodeAt(1),r!==92))return!1;let u=2;const f=u;for(;u<l.length&&(r=l.charCodeAt(u),r!==92);u++);return!(f===u||(r=l.charCodeAt(u+1),isNaN(r)||r===92))}e.isUNC=I;const P=/[\\/:\*\?"<>\|]/g,L=/[\\/]/g,T=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function b(l,r=F.isWindows){const u=r?P:L;return!(!l||l.length===0||/^\s+$/.test(l)||(u.lastIndex=0,u.test(l))||r&&T.test(l)||l==="."||l===".."||r&&l[l.length-1]==="."||r&&l.length!==l.trim().length||l.length>255)}e.isValidBasename=b;function d(l,r,u){const f=l===r;return!u||f?f:!l||!r?!1:(0,q.equalsIgnoreCase)(l,r)}e.isEqual=d;function o(l,r,u,f=M.sep){if(l===r)return!0;if(!l||!r||r.length>l.length)return!1;if(u){if(!(0,q.startsWithIgnoreCase)(l,r))return!1;if(r.length===l.length)return!0;let S=r.length;return r.charAt(r.length-1)===f&&S--,l.charAt(S)===f}return r.charAt(r.length-1)!==f&&(r+=f),l.indexOf(r)===0}e.isEqualOrParent=o;function t(l){return l>=65&&l<=90||l>=97&&l<=122}e.isWindowsDriveLetter=t;function s(l,r){return F.isWindows&&l.endsWith(":")&&(l+=M.sep),(0,M.isAbsolute)(l)||(l=(0,M.join)(r,l)),l=(0,M.normalize)(l),F.isWindows?(l=(0,q.rtrim)(l,M.sep),l.endsWith(":")&&(l+=M.sep)):(l=(0,q.rtrim)(l,M.sep),l||(l=M.sep)),l}e.sanitizeFilePath=s;function i(l){const r=(0,M.normalize)(l);return F.isWindows?l.length>3?!1:h(r)&&(l.length===2||r.charCodeAt(2)===92):r===M.posix.sep}e.isRootOrDriveLetter=i;function h(l,r=F.isWindows){return r?t(l.charCodeAt(0))&&l.charCodeAt(1)===58:!1}e.hasDriveLetter=h;function c(l){return h(l)?l[0]:void 0}e.getDriveLetter=c;function m(l,r,u){return r.length>l.length?-1:l===r?0:(u&&(l=l.toLowerCase(),r=r.toLowerCase()),l.indexOf(r))}e.indexOfPath=m;function y(l){const r=l.split(":");let u,f,C;for(const S of r){const $=Number(S);(0,N.isNumber)($)?f===void 0?f=$:C===void 0&&(C=$):u=u?[u,S].join(":"):S}if(!u)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:u,line:f!==void 0?f:void 0,column:C!==void 0?C:f!==void 0?1:void 0}}e.parseLineAndColumnAware=y;const _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function a(l,r,u=8){let f="";for(let S=0;S<u;S++)f+=_.charAt(Math.floor(Math.random()*_.length));let C;return r?C=`${r}-${f}`:C=f,l?(0,M.join)(l,C):C}e.randomPath=a}),define(ne[8],ie([0,1,3,9]),function(te,e,M,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileAccess=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var q;(function(A){A.inMemory="inmemory",A.vscode="vscode",A.internal="private",A.walkThrough="walkThrough",A.walkThroughSnippet="walkThroughSnippet",A.http="http",A.https="https",A.file="file",A.mailto="mailto",A.untitled="untitled",A.data="data",A.command="command",A.vscodeRemote="vscode-remote",A.vscodeRemoteResource="vscode-remote-resource",A.vscodeUserData="vscode-userdata",A.vscodeCustomEditor="vscode-custom-editor",A.vscodeNotebook="vscode-notebook",A.vscodeNotebookCell="vscode-notebook-cell",A.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",A.vscodeNotebookCellOutput="vscode-notebook-cell-output",A.vscodeInteractive="vscode-interactive",A.vscodeInteractiveInput="vscode-interactive-input",A.vscodeSettings="vscode-settings",A.vscodeWorkspaceTrust="vscode-workspace-trust",A.vscodeTerminal="vscode-terminal",A.webviewPanel="webview-panel",A.vscodeWebview="vscode-webview",A.extension="extension",A.vscodeFileResource="vscode-file",A.tmp="tmp",A.vsls="vsls",A.vscodeSourceControl="vscode-scm"})(q=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class N{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${q.vscodeRemoteResource}`}setPreferredWebSchema(R){this._preferredWebSchema=R}setDelegate(R){this._delegate=R}setServerRootPath(R){this._remoteResourcesPath=`${R}/${q.vscodeRemoteResource}`}set(R,w,I){this._hosts[R]=w,this._ports[R]=I}setConnectionToken(R,w){this._connectionTokens[R]=w}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(R){if(this._delegate)return this._delegate(R);const w=R.authority;let I=this._hosts[w];I&&I.indexOf(":")!==-1&&(I=`[${I}]`);const P=this._ports[w],L=this._connectionTokens[w];let T=`path=${encodeURIComponent(R.path)}`;return typeof L=="string"&&(T+=`&${e.connectionTokenQueryName}=${encodeURIComponent(L)}`),F.URI.from({scheme:M.isWeb?this._preferredWebSchema:q.vscodeRemoteResource,authority:`${I}:${P}`,path:M.isWeb?(window.location.pathname+"/"+this._remoteResourcesPath).replace(/\/\/+/g,"/"):this._remoteResourcesPath,query:T})}}e.RemoteAuthorities=new N;class O{asBrowserUri(R,w){const I=this.toUri(R,w);return I.scheme===q.vscodeRemote?e.RemoteAuthorities.rewrite(I):I.scheme===q.file&&(M.isNative||M.isWebWorker&&M.globals.origin===`${q.vscodeFileResource}://${O.FALLBACK_AUTHORITY}`)?I.with({scheme:q.vscodeFileResource,authority:I.authority||O.FALLBACK_AUTHORITY,query:null,fragment:null}):I}asFileUri(R,w){const I=this.toUri(R,w);return I.scheme===q.vscodeFileResource?I.with({scheme:q.file,authority:I.authority!==O.FALLBACK_AUTHORITY?I.authority:null,query:null,fragment:null}):I}toUri(R,w){return F.URI.isUri(R)?R:F.URI.parse(w.toUrl(R))}}O.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new O}),define(ne[17],ie([0,1,7,8,4,3,2,9]),function(te,e,M,F,q,N,O,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function R(T){return(0,A.uriToFsPath)(T,!0)}e.originalFSPath=R;class w{constructor(b){this._ignorePathCasing=b}compare(b,d,o=!1){return b===d?0:(0,O.compare)(this.getComparisonKey(b,o),this.getComparisonKey(d,o))}isEqual(b,d,o=!1){return b===d?!0:!b||!d?!1:this.getComparisonKey(b,o)===this.getComparisonKey(d,o)}getComparisonKey(b,d=!1){return b.with({path:this._ignorePathCasing(b)?b.path.toLowerCase():void 0,fragment:d?null:void 0}).toString()}ignorePathCasing(b){return this._ignorePathCasing(b)}isEqualOrParent(b,d,o=!1){if(b.scheme===d.scheme){if(b.scheme===F.Schemas.file)return M.isEqualOrParent(R(b),R(d),this._ignorePathCasing(b))&&b.query===d.query&&(o||b.fragment===d.fragment);if((0,e.isEqualAuthority)(b.authority,d.authority))return M.isEqualOrParent(b.path,d.path,this._ignorePathCasing(b),"/")&&b.query===d.query&&(o||b.fragment===d.fragment)}return!1}joinPath(b,...d){return A.URI.joinPath(b,...d)}basenameOrAuthority(b){return(0,e.basename)(b)||b.authority}basename(b){return q.posix.basename(b.path)}extname(b){return q.posix.extname(b.path)}dirname(b){if(b.path.length===0)return b;let d;return b.scheme===F.Schemas.file?d=A.URI.file(q.dirname(R(b))).path:(d=q.posix.dirname(b.path),b.authority&&d.length&&d.charCodeAt(0)!==47&&(console.error(`dirname("${b.toString})) resulted in a relative path`),d="/")),b.with({path:d})}normalizePath(b){if(!b.path.length)return b;let d;return b.scheme===F.Schemas.file?d=A.URI.file(q.normalize(R(b))).path:d=q.posix.normalize(b.path),b.with({path:d})}relativePath(b,d){if(b.scheme!==d.scheme||!(0,e.isEqualAuthority)(b.authority,d.authority))return;if(b.scheme===F.Schemas.file){const s=q.relative(R(b),R(d));return N.isWindows?M.toSlashes(s):s}let o=b.path||"/";const t=d.path||"/";if(this._ignorePathCasing(b)){let s=0;for(const i=Math.min(o.length,t.length);s<i&&!(o.charCodeAt(s)!==t.charCodeAt(s)&&o.charAt(s).toLowerCase()!==t.charAt(s).toLowerCase());s++);o=t.substr(0,s)+o.substr(s)}return q.posix.relative(o,t)}resolvePath(b,d){if(b.scheme===F.Schemas.file){const o=A.URI.file(q.resolve(R(b),d));return b.with({authority:o.authority,path:o.path})}return d=M.toPosixPath(d),b.with({path:q.posix.resolve(b.path,d)})}isAbsolutePath(b){return!!b.path&&b.path[0]==="/"}isEqualAuthority(b,d){return b===d||b!==void 0&&d!==void 0&&(0,O.equalsIgnoreCase)(b,d)}hasTrailingPathSeparator(b,d=q.sep){if(b.scheme===F.Schemas.file){const o=R(b);return o.length>M.getRoot(o).length&&o[o.length-1]===d}else{const o=b.path;return o.length>1&&o.charCodeAt(o.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(b.fsPath)}}removeTrailingPathSeparator(b,d=q.sep){return(0,e.hasTrailingPathSeparator)(b,d)?b.with({path:b.path.substr(0,b.path.length-1)}):b}addTrailingPathSeparator(b,d=q.sep){let o=!1;if(b.scheme===F.Schemas.file){const t=R(b);o=t!==void 0&&t.length===M.getRoot(t).length&&t[t.length-1]===d}else{d="/";const t=b.path;o=t.length===1&&t.charCodeAt(t.length-1)===47}return!o&&!(0,e.hasTrailingPathSeparator)(b,d)?b.with({path:b.path+"/"}):b}}e.ExtUri=w,e.extUri=new w(()=>!1),e.extUriBiasedIgnorePathCase=new w(T=>T.scheme===F.Schemas.file?!N.isLinux:!0),e.extUriIgnorePathCase=new w(T=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function I(T,b){const d=[];for(let o=0;o<T.length;o++){const t=b(T[o]);T.some((s,i)=>i===o?!1:(0,e.isEqualOrParent)(t,b(s)))||d.push(T[o])}return d}e.distinctParents=I;var P;(function(T){T.META_DATA_LABEL="label",T.META_DATA_DESCRIPTION="description",T.META_DATA_SIZE="size",T.META_DATA_MIME="mime";function b(d){const o=new Map;d.path.substring(d.path.indexOf(";")+1,d.path.lastIndexOf(";")).split(";").forEach(i=>{const[h,c]=i.split(":");h&&c&&o.set(h,c)});const s=d.path.substring(0,d.path.indexOf(";"));return s&&o.set(T.META_DATA_MIME,s),o}T.parseMetaData=b})(P=e.DataUri||(e.DataUri={}));function L(T,b,d){if(b){let o=T.path;return o&&o[0]!==q.posix.sep&&(o=q.posix.sep+o),T.with({scheme:d,authority:b,path:o})}return T.with({scheme:d})}e.toLocalResource=L}),define(ne[18],ie([0,1,32,14,19,6,17,3]),function(te,e,M,F,q,N,O,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function R(W){return!!W&&typeof W.then=="function"}e.isThenable=R;function w(W){const g=new M.CancellationTokenSource,v=W(g.token),k=new Promise((U,x)=>{const Z=g.token.onCancellationRequested(()=>{Z.dispose(),g.dispose(),x(new F.CancellationError)});Promise.resolve(v).then(ee=>{Z.dispose(),g.dispose(),U(ee)},ee=>{Z.dispose(),g.dispose(),x(ee)})});return new class{cancel(){g.cancel()}then(U,x){return k.then(U,x)}catch(U){return this.then(void 0,U)}finally(U){return k.finally(U)}}}e.createCancelablePromise=w;function I(W,g,v){return new Promise((k,U)=>{const x=g.onCancellationRequested(()=>{x.dispose(),k(v)});W.then(k,U).finally(()=>x.dispose())})}e.raceCancellation=I;function P(W,g){return new Promise((v,k)=>{const U=g.onCancellationRequested(()=>{U.dispose(),k(new F.CancellationError)});W.then(v,k).finally(()=>U.dispose())})}e.raceCancellationError=P;async function L(W){let g=-1;const v=W.map((U,x)=>U.then(Z=>(g=x,Z))),k=await Promise.race(v);return W.forEach((U,x)=>{x!==g&&U.cancel()}),k}e.raceCancellablePromises=L;function T(W,g,v){let k;const U=setTimeout(()=>{k?.(void 0),v?.()},g);return Promise.race([W.finally(()=>clearTimeout(U)),new Promise(x=>k=x)])}e.raceTimeout=T;function b(W){return new Promise((g,v)=>{const k=W();R(k)?k.then(g,v):g(k)})}e.asPromise=b;class d{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(g){if(this.activePromise){if(this.queuedPromiseFactory=g,!this.queuedPromise){const v=()=>{this.queuedPromise=null;const k=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,k};this.queuedPromise=new Promise(k=>{this.activePromise.then(v,v).then(k)})}return new Promise((v,k)=>{this.queuedPromise.then(v,k)})}return this.activePromise=g(),new Promise((v,k)=>{this.activePromise.then(U=>{this.activePromise=null,v(U)},U=>{this.activePromise=null,k(U)})})}}e.Throttler=d;class o{constructor(){this.current=Promise.resolve(null)}queue(g){return this.current=this.current.then(()=>g(),()=>g())}}e.Sequencer=o;class t{constructor(){this.promiseMap=new Map}queue(g,v){const U=(this.promiseMap.get(g)??Promise.resolve()).catch(()=>{}).then(v).finally(()=>{this.promiseMap.get(g)===U&&this.promiseMap.delete(g)});return this.promiseMap.set(g,U),U}}e.SequencerByKey=t;const s=(W,g)=>{let v=!0;const k=setTimeout(()=>{v=!1,g()},W);return{isTriggered:()=>v,dispose:()=>{clearTimeout(k),v=!1}}},i=W=>{let g=!0;return queueMicrotask(()=>{g&&(g=!1,W())}),{isTriggered:()=>g,dispose:()=>{g=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class h{constructor(g){this.defaultDelay=g,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(g,v=this.defaultDelay){this.task=g,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((U,x)=>{this.doResolve=U,this.doReject=x}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const U=this.task;return this.task=null,U()}}));const k=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=v===e.MicrotaskDelay?i(k):s(v,k),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new F.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=h;class c{constructor(g){this.delayer=new h(g),this.throttler=new d}trigger(g,v){return this.delayer.trigger(()=>this.throttler.queue(g),v)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=c;class m{constructor(){this._isOpen=!1,this._promise=new Promise((g,v)=>{this._completePromise=g})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=m;class y extends m{constructor(g){super();this._timeout=setTimeout(()=>this.open(),g)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=y;function _(W,g){return g?new Promise((v,k)=>{const U=setTimeout(()=>{x.dispose(),v()},W),x=g.onCancellationRequested(()=>{clearTimeout(U),x.dispose(),k(new F.CancellationError)})}):w(v=>_(W,v))}e.timeout=_;function a(W,g=0){const v=setTimeout(W,g);return(0,N.toDisposable)(()=>clearTimeout(v))}e.disposableTimeout=a;function l(W){const g=[];let v=0;const k=W.length;function U(){return v<k?W[v++]():null}function x(Z){Z!=null&&g.push(Z);const ee=U();return ee?ee.then(x):Promise.resolve(g)}return Promise.resolve(null).then(x)}e.sequence=l;function r(W,g=k=>!!k,v=null){let k=0;const U=W.length,x=()=>{if(k>=U)return Promise.resolve(v);const Z=W[k++];return Promise.resolve(Z()).then(re=>g(re)?Promise.resolve(re):x())};return x()}e.first=r;function u(W,g=k=>!!k,v=null){if(W.length===0)return Promise.resolve(v);let k=W.length;const U=()=>{k=-1;for(const x of W)x.cancel?.()};return new Promise((x,Z)=>{for(const ee of W)ee.then(re=>{--k>=0&&g(re)?(U(),x(re)):k===0&&x(v)}).catch(re=>{--k>=0&&(U(),Z(re))})})}e.firstParallel=u;class f{constructor(g){this._size=0,this.maxDegreeOfParalellism=g,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new q.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(g){return this._size++,new Promise((v,k)=>{this.outstandingPromises.push({factory:g,c:v,e:k}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const g=this.outstandingPromises.shift();this.runningPromises++;const v=g.factory();v.then(g.c,g.e),v.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}e.Limiter=f;class C extends f{constructor(){super(1)}}e.Queue=C;class S{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const g=new z;return this.drainers.add(g),g.p}isDrained(){for(const[,g]of this.queues)if(g.size>0)return!1;return!0}queueFor(g,v=O.extUri){const k=v.getComparisonKey(g);let U=this.queues.get(k);return U||(U=new C,q.Event.once(U.onDrained)(()=>{U?.dispose(),this.queues.delete(k),this.onDidQueueDrain()}),this.queues.set(k,U)),U}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const g of this.drainers)g.complete();this.drainers.clear()}dispose(){for(const[,g]of this.queues)g.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=S;class ${constructor(g,v){this._token=-1,typeof g=="function"&&typeof v=="number"&&this.setIfNotSet(g,v)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(g,v){this.cancel(),this._token=setTimeout(()=>{this._token=-1,g()},v)}setIfNotSet(g,v){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,g()},v))}}e.TimeoutTimer=$;class j{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(g,v){this.cancel(),this._token=setInterval(()=>{g()},v)}}e.IntervalTimer=j;class B{constructor(g,v){this.timeoutToken=-1,this.runner=g,this.timeout=v,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(g=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,g)}get delay(){return this.timeout}set delay(g){this.timeout=g}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}e.RunOnceScheduler=B;class n{constructor(g,v){v%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${v}ms is not a multiple of 1000ms.`),this.runner=g,this.timeout=v,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(g=this.timeout){g%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${g}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(g/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}e.ProcessTimeRunOnceScheduler=n;class p extends B{constructor(g,v){super(g,v);this.units=[]}work(g){this.units.push(g),this.isScheduled()||this.schedule()}doRun(){const g=this.units;this.units=[],this.runner?.(g)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=p;class E extends N.Disposable{constructor(g,v){super();this.options=g,this.handler=v,this.pendingWork=[],this.throttler=this._register(new N.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(g){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+g.length>this.options.maxBufferedWork)return!1}else if(this.pending+g.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...g),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new B(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=E,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=W=>{(0,A.setTimeout0)(()=>{if(g)return;const v=Date.now()+15;W(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,v-Date.now())}}))});let g=!1;return{dispose(){g||(g=!0)}}}:e.runWhenIdle=(W,g)=>{const v=requestIdleCallback(W,typeof g=="number"?{timeout:g}:void 0);let k=!1;return{dispose(){k||(k=!0,cancelIdleCallback(v))}}}}();class D{constructor(g){this._didRun=!1,this._executor=()=>{try{this._value=g()}catch(v){this._error=v}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=D;async function G(W,g,v){let k;for(let U=0;U<v;U++)try{return await W()}catch(x){k=x,await _(g)}throw k}e.retry=G;class Y{hasPending(g){return this._pending?typeof g=="number"?this._pending.taskId===g:!!this._pending:!1}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){this._pending?.cancel()}setPending(g,v,k){return this._pending={taskId:g,cancel:()=>k?.(),promise:v},v.then(()=>this.donePending(g),()=>this.donePending(g)),v}donePending(g){this._pending&&g===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const g=this._next;this._next=void 0,g.run().then(g.promiseResolve,g.promiseReject)}}setNext(g){if(this._next)this._next.run=g;else{let v,k;const U=new Promise((x,Z)=>{v=x,k=Z});this._next={run:g,promise:U,promiseResolve:v,promiseReject:k}}return this._next.promise}}e.TaskSequentializer=Y;class J{constructor(g,v=()=>Date.now()){this.interval=g,this.nowFn=v,this.lastIncrementTime=0,this.value=0}increment(){const g=this.nowFn();return g-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=g,this.value=0),this.value++,this.value}}e.IntervalCounter=J;class z{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((g,v)=>{this.completeCallback=g,this.errorCallback=v})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(g){return new Promise(v=>{this.completeCallback(g),this.resolved=!0,v()})}error(g){return new Promise(v=>{this.errorCallback(g),this.rejected=!0,v()})}cancel(){new Promise(g=>{this.errorCallback(new F.CancellationError),this.rejected=!0,g()})}}e.DeferredPromise=z;var K;(function(W){async function g(k){let U;const x=await Promise.all(k.map(Z=>Z.then(ee=>ee,ee=>{U||(U=ee)})));if(typeof U!="undefined")throw U;return x}W.settled=g;function v(k){return new Promise(async(U,x)=>{try{await k(U,x)}catch(Z){x(Z)}})}W.withAsyncBody=v})(K=e.Promises||(e.Promises={}));var V;(function(W){W[W.Initial=0]="Initial",W[W.DoneOK=1]="DoneOK",W[W.DoneError=2]="DoneError"})(V||(V={}));class H{constructor(g){this._state=0,this._results=[],this._error=null,this._onStateChanged=new q.Emitter,queueMicrotask(async()=>{const v={emitOne:k=>this.emitOne(k),emitMany:k=>this.emitMany(k),reject:k=>this.reject(k)};try{await Promise.resolve(g(v)),this.resolve()}catch(k){this.reject(k)}finally{v.emitOne=void 0,v.emitMany=void 0,v.reject=void 0}})}static fromArray(g){return new H(v=>{v.emitMany(g)})}static fromPromise(g){return new H(async v=>{v.emitMany(await g)})}static fromPromises(g){return new H(async v=>{await Promise.all(g.map(async k=>v.emitOne(await k)))})}static merge(g){return new H(async v=>{await Promise.all(g.map(async k=>{for await(const U of k)v.emitOne(U)}))})}[Symbol.asyncIterator](){let g=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(g<this._results.length)return{done:!1,value:this._results[g++]};if(this._state===1)return{done:!0,value:void 0};await q.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(g,v){return new H(async k=>{for await(const U of g)k.emitOne(v(U))})}map(g){return H.map(this,g)}static filter(g,v){return new H(async k=>{for await(const U of g)v(U)&&k.emitOne(U)})}filter(g){return H.filter(this,g)}static coalesce(g){return H.filter(g,v=>!!v)}coalesce(){return H.coalesce(this)}static async toPromise(g){const v=[];for await(const k of g)v.push(k);return v}toPromise(){return H.toPromise(this)}emitOne(g){this._state===0&&(this._results.push(g),this._onStateChanged.fire())}emitMany(g){this._state===0&&(this._results=this._results.concat(g),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(g){this._state===0&&(this._state=2,this._error=g,this._onStateChanged.fire())}}e.AsyncIterableObject=H,H.EMPTY=H.fromArray([]);class Q extends H{constructor(g,v){super(v);this._source=g}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=Q;function X(W){const g=new M.CancellationTokenSource,v=W(g.token);return new Q(g,async k=>{const U=g.token.onCancellationRequested(()=>{U.dispose(),g.dispose(),k.reject(new F.CancellationError)});try{for await(const x of v){if(g.token.isCancellationRequested)return;k.emitOne(x)}U.dispose(),g.dispose()}catch(x){U.dispose(),g.dispose(),k.reject(x)}})}e.createCancelableAsyncIterable=X}),define(ne[20],ie([0,1,16,18,7,15,4,3,2]),function(te,e,M,F,q,N,O,A,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function w(){return Object.create(null)}e.getEmptyExpression=w,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const I="[/\\\\]",P="[^/\\\\]",L=/\//g;function T(z,K){switch(z){case 0:return"";case 1:return`${P}*?`;default:return`(?:${I}|${P}+${I}${K?`|${I}${P}+`:""})*?`}}function b(z,K){if(!z)return[];const V=[];let H=!1,Q=!1,X="";for(const W of z){switch(W){case K:if(!H&&!Q){V.push(X),X="";continue}break;case"{":H=!0;break;case"}":H=!1;break;case"[":Q=!0;break;case"]":Q=!1;break}X+=W}return X&&V.push(X),V}e.splitGlobAware=b;function d(z){if(!z)return"";let K="";const V=b(z,e.GLOB_SPLIT);if(V.every(H=>H===e.GLOBSTAR))K=".*";else{let H=!1;V.forEach((Q,X)=>{if(Q===e.GLOBSTAR){if(H)return;K+=T(2,X===V.length-1)}else{let W=!1,g="",v=!1,k="";for(const U of Q){if(U!=="}"&&W){g+=U;continue}if(v&&(U!=="]"||!k)){let x;U==="-"?x=U:(U==="^"||U==="!")&&!k?x="^":U===e.GLOB_SPLIT?x="":x=(0,R.escapeRegExpCharacters)(U),k+=x;continue}switch(U){case"{":W=!0;continue;case"[":v=!0;continue;case"}":{K+=`(?:${b(g,",").map(ee=>d(ee)).join("|")})`,W=!1,g="";break}case"]":{K+="["+k+"]",v=!1,k="";break}case"?":K+=P;continue;case"*":K+=T(1);continue;default:K+=(0,R.escapeRegExpCharacters)(U)}}X<V.length-1&&(V[X+1]!==e.GLOBSTAR||X+2<V.length)&&(K+=I)}H=Q===e.GLOBSTAR})}return K}const o=/^\*\*\/\*\.[\w\.-]+$/,t=/^\*\*\/([\w\.-]+)\/?$/,s=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,i=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,h=/^\*\*((\/[\w\.-]+)+)\/?$/,c=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,m=new N.LRUCache(1e4),y=function(){return!1},_=function(){return null};function a(z,K){if(!z)return _;let V;typeof z!="string"?V=z.pattern:V=z,V=V.trim();const H=`${V}_${!!K.trimForExclusions}`;let Q=m.get(H);if(Q)return l(Q,z);let X;return o.test(V)?Q=u(V.substr(4),V):(X=t.exec(r(V,K)))?Q=f(X[1],V):(K.trimForExclusions?i:s).test(V)?Q=C(V,K):(X=h.exec(r(V,K)))?Q=S(X[1].substr(1),V,!0):(X=c.exec(r(V,K)))?Q=S(X[1],V,!1):Q=$(V),m.set(H,Q),l(Q,z)}function l(z,K){if(typeof K=="string")return z;const V=function(H,Q){return(0,q.isEqualOrParent)(H,K.base,!A.isLinux)?z(H.substr(K.base.length+1),Q):null};return V.allBasenames=z.allBasenames,V.allPaths=z.allPaths,V.basenames=z.basenames,V.patterns=z.patterns,V}function r(z,K){return K.trimForExclusions&&z.endsWith("/**")?z.substr(0,z.length-2):z}function u(z,K){return function(V,H){return typeof V=="string"&&V.endsWith(z)?K:null}}function f(z,K){const V=`/${z}`,H=`\\${z}`,Q=function(W,g){return typeof W!="string"?null:g?g===z?K:null:W===z||W.endsWith(V)||W.endsWith(H)?K:null},X=[z];return Q.basenames=X,Q.patterns=[K],Q.allBasenames=X,Q}function C(z,K){const V=Y(z.slice(1,-1).split(",").map(g=>a(g,K)).filter(g=>g!==_),z),H=V.length;if(!H)return _;if(H===1)return V[0];const Q=function(g,v){for(let k=0,U=V.length;k<U;k++)if(V[k](g,v))return z;return null},X=V.find(g=>!!g.allBasenames);X&&(Q.allBasenames=X.allBasenames);const W=V.reduce((g,v)=>v.allPaths?g.concat(v.allPaths):g,[]);return W.length&&(Q.allPaths=W),Q}function S(z,K,V){const H=O.sep===O.posix.sep,Q=H?z:z.replace(L,O.sep),X=O.sep+Q,W=O.posix.sep+z;let g;return V?g=function(v,k){return typeof v=="string"&&(v===Q||v.endsWith(X)||!H&&(v===z||v.endsWith(W)))?K:null}:g=function(v,k){return typeof v=="string"&&(v===Q||!H&&v===z)?K:null},g.allPaths=[(V?"*/":"./")+z],g}function $(z){try{const K=new RegExp(`^${d(z)}$`);return function(V){return K.lastIndex=0,typeof V=="string"&&K.test(V)?z:null}}catch{return _}}function j(z,K,V){return!z||typeof K!="string"?!1:B(z)(K,void 0,V)}e.match=j;function B(z,K={}){if(!z)return y;if(typeof z=="string"||n(z)){const V=a(z,K);if(V===_)return y;const H=function(Q,X){return!!V(Q,X)};return V.allBasenames&&(H.allBasenames=V.allBasenames),V.allPaths&&(H.allPaths=V.allPaths),H}return D(z,K)}e.parse=B;function n(z){const K=z;return K?typeof K.base=="string"&&typeof K.pattern=="string":!1}e.isRelativePattern=n;function p(z){return z.allBasenames||[]}e.getBasenameTerms=p;function E(z){return z.allPaths||[]}e.getPathTerms=E;function D(z,K){const V=Y(Object.getOwnPropertyNames(z).map(g=>G(g,z[g],K)).filter(g=>g!==_)),H=V.length;if(!H)return _;if(!V.some(g=>!!g.requiresSiblings)){if(H===1)return V[0];const g=function(U,x){let Z;for(let ee=0,re=V.length;ee<re;ee++){const se=V[ee](U,x);if(typeof se=="string")return se;(0,F.isThenable)(se)&&(Z||(Z=[]),Z.push(se))}return Z?(async()=>{for(const ee of Z){const re=await ee;if(typeof re=="string")return re}return null})():null},v=V.find(U=>!!U.allBasenames);v&&(g.allBasenames=v.allBasenames);const k=V.reduce((U,x)=>x.allPaths?U.concat(x.allPaths):U,[]);return k.length&&(g.allPaths=k),g}const Q=function(g,v,k){let U,x;for(let Z=0,ee=V.length;Z<ee;Z++){const re=V[Z];re.requiresSiblings&&k&&(v||(v=(0,O.basename)(g)),U||(U=v.substr(0,v.length-(0,O.extname)(g).length)));const se=re(g,v,U,k);if(typeof se=="string")return se;(0,F.isThenable)(se)&&(x||(x=[]),x.push(se))}return x?(async()=>{for(const Z of x){const ee=await Z;if(typeof ee=="string")return ee}return null})():null},X=V.find(g=>!!g.allBasenames);X&&(Q.allBasenames=X.allBasenames);const W=V.reduce((g,v)=>v.allPaths?g.concat(v.allPaths):g,[]);return W.length&&(Q.allPaths=W),Q}function G(z,K,V){if(K===!1)return _;const H=a(z,V);if(H===_)return _;if(typeof K=="boolean")return H;if(K){const Q=K.when;if(typeof Q=="string"){const X=(W,g,v,k)=>{if(!k||!H(W,g))return null;const U=Q.replace("$(basename)",v),x=k(U);return(0,F.isThenable)(x)?x.then(Z=>Z?z:null):x?z:null};return X.requiresSiblings=!0,X}}return H}function Y(z,K){const V=z.filter(g=>!!g.basenames);if(V.length<2)return z;const H=V.reduce((g,v)=>{const k=v.basenames;return k?g.concat(k):g},[]);let Q;if(K){Q=[];for(let g=0,v=H.length;g<v;g++)Q.push(K)}else Q=V.reduce((g,v)=>{const k=v.patterns;return k?g.concat(k):g},[]);const X=function(g,v){if(typeof g!="string")return null;if(!v){let U;for(U=g.length;U>0;U--){const x=g.charCodeAt(U-1);if(x===47||x===92)break}v=g.substr(U)}const k=H.indexOf(v);return k!==-1?Q[k]:null};X.basenames=H,X.patterns=Q,X.allBasenames=H;const W=z.filter(g=>!g.basenames);return W.push(X),W}function J(z,K){return(0,M.equals)(z,K,(V,H)=>typeof V=="string"&&typeof H=="string"?V===H:typeof V!="string"&&typeof H!="string"?V.base===H.base&&V.pattern===H.pattern:!1)}e.patternsEquals=J}),define(ne[21],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=e.StringEOL=void 0;var M;(function(q){q[q.Unknown=0]="Unknown",q[q.Invalid=3]="Invalid",q[q.LF=1]="LF",q[q.CRLF=2]="CRLF"})(M=e.StringEOL||(e.StringEOL={}));function F(q){let N=0,O=0,A=0,R=0;for(let w=0,I=q.length;w<I;w++){const P=q.charCodeAt(w);P===13?(N===0&&(O=w),N++,w+1<I&&q.charCodeAt(w+1)===10?(R|=2,w++):R|=3,A=w+1):P===10&&(R|=1,N===0&&(O=w),N++,A=w+1)}return N===0&&(O=q.length),[N,O,q.length-A,R]}e.countEOL=F}),define(ne[22],ie([0,1,2,3,5]),function(te,e,M,F,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringBuilder=e.decodeUTF16LE=e.getPlatformTextDecoder=void 0;let N;function O(){return N||(N=new TextDecoder("UTF-16LE")),N}let A;function R(){return A||(A=new TextDecoder("UTF-16BE")),A}let w;function I(){return w||(w=F.isLittleEndian()?O():R()),w}e.getPlatformTextDecoder=I;function P(b,d,o){const t=new Uint16Array(b.buffer,d,o);return o>0&&(t[0]===65279||t[0]===65534)?L(b,d,o):O().decode(t)}e.decodeUTF16LE=P;function L(b,d,o){const t=[];let s=0;for(let i=0;i<o;i++){const h=q.readUInt16LE(b,d);d+=2,t[s++]=String.fromCharCode(h)}return t.join("")}class T{constructor(d){this._capacity=d|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const d=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return I().decode(d)}_flushBuffer(){const d=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[d]:this._completedStrings[this._completedStrings.length]=d}write1(d){const o=this._capacity-this._bufferLength;o<=1&&(o===0||M.isHighSurrogate(d))&&this._flushBuffer(),this._buffer[this._bufferLength++]=d}appendASCII(d){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=d}appendASCIIString(d){const o=d.length;if(this._bufferLength+o>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=d;return}for(let t=0;t<o;t++)this._buffer[this._bufferLength++]=d.charCodeAt(t)}}e.StringBuilder=T}),define(ne[23],ie([0,1,5,22]),function(te,e,M,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressConsecutiveTextChanges=e.TextChange=void 0;function q(R){return R.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class N{constructor(w,I,P,L){this.oldPosition=w,this.oldText=I,this.newPosition=P,this.newText=L}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${q(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${q(this.oldText)}")`:`(replace@${this.oldPosition} "${q(this.oldText)}" with "${q(this.newText)}")`}static _writeStringSize(w){return 4+2*w.length}static _writeString(w,I,P){const L=I.length;M.writeUInt32BE(w,L,P),P+=4;for(let T=0;T<L;T++)M.writeUInt16LE(w,I.charCodeAt(T),P),P+=2;return P}static _readString(w,I){const P=M.readUInt32BE(w,I);return I+=4,(0,F.decodeUTF16LE)(w,I,P)}writeSize(){return 4+4+N._writeStringSize(this.oldText)+N._writeStringSize(this.newText)}write(w,I){return M.writeUInt32BE(w,this.oldPosition,I),I+=4,M.writeUInt32BE(w,this.newPosition,I),I+=4,I=N._writeString(w,this.oldText,I),I=N._writeString(w,this.newText,I),I}static read(w,I,P){const L=M.readUInt32BE(w,I);I+=4;const T=M.readUInt32BE(w,I);I+=4;const b=N._readString(w,I);I+=N._writeStringSize(b);const d=N._readString(w,I);return I+=N._writeStringSize(d),P.push(new N(L,b,T,d)),I}}e.TextChange=N;function O(R,w){return R===null||R.length===0?w:new A(R,w).compress()}e.compressConsecutiveTextChanges=O;class A{constructor(w,I){this._prevEdits=w,this._currEdits=I,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let w=0,I=0,P=this._getPrev(w),L=this._getCurr(I);for(;w<this._prevLen||I<this._currLen;){if(P===null){this._acceptCurr(L),L=this._getCurr(++I);continue}if(L===null){this._acceptPrev(P),P=this._getPrev(++w);continue}if(L.oldEnd<=P.newPosition){this._acceptCurr(L),L=this._getCurr(++I);continue}if(P.newEnd<=L.oldPosition){this._acceptPrev(P),P=this._getPrev(++w);continue}if(L.oldPosition<P.newPosition){const[t,s]=A._splitCurr(L,P.newPosition-L.oldPosition);this._acceptCurr(t),L=s;continue}if(P.newPosition<L.oldPosition){const[t,s]=A._splitPrev(P,L.oldPosition-P.newPosition);this._acceptPrev(t),P=s;continue}let d,o;if(L.oldEnd===P.newEnd)d=P,o=L,P=this._getPrev(++w),L=this._getCurr(++I);else if(L.oldEnd<P.newEnd){const[t,s]=A._splitPrev(P,L.oldLength);d=t,o=L,P=s,L=this._getCurr(++I)}else{const[t,s]=A._splitCurr(L,P.newLength);d=P,o=t,P=this._getPrev(++w),L=s}this._result[this._resultLen++]=new N(d.oldPosition,d.oldText,o.newPosition,o.newText),this._prevDeltaOffset+=d.newLength-d.oldLength,this._currDeltaOffset+=o.newLength-o.oldLength}const T=A._merge(this._result);return A._removeNoOps(T)}_acceptCurr(w){this._result[this._resultLen++]=A._rebaseCurr(this._prevDeltaOffset,w),this._currDeltaOffset+=w.newLength-w.oldLength}_getCurr(w){return w<this._currLen?this._currEdits[w]:null}_acceptPrev(w){this._result[this._resultLen++]=A._rebasePrev(this._currDeltaOffset,w),this._prevDeltaOffset+=w.newLength-w.oldLength}_getPrev(w){return w<this._prevLen?this._prevEdits[w]:null}static _rebaseCurr(w,I){return new N(I.oldPosition-w,I.oldText,I.newPosition,I.newText)}static _rebasePrev(w,I){return new N(I.oldPosition,I.oldText,I.newPosition+w,I.newText)}static _splitPrev(w,I){const P=w.newText.substr(0,I),L=w.newText.substr(I);return[new N(w.oldPosition,w.oldText,w.newPosition,P),new N(w.oldEnd,"",w.newPosition+I,L)]}static _splitCurr(w,I){const P=w.oldText.substr(0,I),L=w.oldText.substr(I);return[new N(w.oldPosition,P,w.newPosition,w.newText),new N(w.oldPosition+I,L,w.newEnd,"")]}static _merge(w){if(w.length===0)return w;const I=[];let P=0,L=w[0];for(let T=1;T<w.length;T++){const b=w[T];L.oldEnd===b.oldPosition?L=new N(L.oldPosition,L.oldText+b.oldText,L.newPosition,L.newText+b.newText):(I[P++]=L,L=b)}return I[P++]=L,I}static _removeNoOps(w){if(w.length===0)return w;const I=[];let P=0;for(let L=0;L<w.length;L++){const T=w[L];T.oldText!==T.newText&&(I[P++]=T)}return I}}}),define(ne[24],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recomputeTreeMetadata=e.updateTreeMetadata=e.fixInsert=e.rbDelete=e.rightRotate=e.leftRotate=e.resetSentinel=e.calculateLF=e.calculateSize=e.righttest=e.leftest=e.SENTINEL=e.NodeColor=e.TreeNode=void 0;class M{constructor(o,t){this.piece=o,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==e.SENTINEL)return q(this.right);let o=this;for(;o.parent!==e.SENTINEL&&o.parent.left!==o;)o=o.parent;return o.parent===e.SENTINEL?e.SENTINEL:o.parent}prev(){if(this.left!==e.SENTINEL)return N(this.left);let o=this;for(;o.parent!==e.SENTINEL&&o.parent.right!==o;)o=o.parent;return o.parent===e.SENTINEL?e.SENTINEL:o.parent}detach(){this.parent=null,this.left=null,this.right=null}}e.TreeNode=M;var F;(function(d){d[d.Black=0]="Black",d[d.Red=1]="Red"})(F=e.NodeColor||(e.NodeColor={})),e.SENTINEL=new M(null,0),e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.left=e.SENTINEL,e.SENTINEL.right=e.SENTINEL,e.SENTINEL.color=0;function q(d){for(;d.left!==e.SENTINEL;)d=d.left;return d}e.leftest=q;function N(d){for(;d.right!==e.SENTINEL;)d=d.right;return d}e.righttest=N;function O(d){return d===e.SENTINEL?0:d.size_left+d.piece.length+O(d.right)}e.calculateSize=O;function A(d){return d===e.SENTINEL?0:d.lf_left+d.piece.lineFeedCnt+A(d.right)}e.calculateLF=A;function R(){e.SENTINEL.parent=e.SENTINEL}e.resetSentinel=R;function w(d,o){const t=o.right;t.size_left+=o.size_left+(o.piece?o.piece.length:0),t.lf_left+=o.lf_left+(o.piece?o.piece.lineFeedCnt:0),o.right=t.left,t.left!==e.SENTINEL&&(t.left.parent=o),t.parent=o.parent,o.parent===e.SENTINEL?d.root=t:o.parent.left===o?o.parent.left=t:o.parent.right=t,t.left=o,o.parent=t}e.leftRotate=w;function I(d,o){const t=o.left;o.left=t.right,t.right!==e.SENTINEL&&(t.right.parent=o),t.parent=o.parent,o.size_left-=t.size_left+(t.piece?t.piece.length:0),o.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),o.parent===e.SENTINEL?d.root=t:o===o.parent.right?o.parent.right=t:o.parent.left=t,t.right=o,o.parent=t}e.rightRotate=I;function P(d,o){let t,s;if(o.left===e.SENTINEL?(s=o,t=s.right):o.right===e.SENTINEL?(s=o,t=s.left):(s=q(o.right),t=s.right),s===d.root){d.root=t,t.color=0,o.detach(),R(),d.root.parent=e.SENTINEL;return}const i=s.color===1;if(s===s.parent.left?s.parent.left=t:s.parent.right=t,s===o?(t.parent=s.parent,b(d,t)):(s.parent===o?t.parent=s:t.parent=s.parent,b(d,t),s.left=o.left,s.right=o.right,s.parent=o.parent,s.color=o.color,o===d.root?d.root=s:o===o.parent.left?o.parent.left=s:o.parent.right=s,s.left!==e.SENTINEL&&(s.left.parent=s),s.right!==e.SENTINEL&&(s.right.parent=s),s.size_left=o.size_left,s.lf_left=o.lf_left,b(d,s)),o.detach(),t.parent.left===t){const c=O(t),m=A(t);if(c!==t.parent.size_left||m!==t.parent.lf_left){const y=c-t.parent.size_left,_=m-t.parent.lf_left;t.parent.size_left=c,t.parent.lf_left=m,T(d,t.parent,y,_)}}if(b(d,t.parent),i){R();return}let h;for(;t!==d.root&&t.color===0;)t===t.parent.left?(h=t.parent.right,h.color===1&&(h.color=0,t.parent.color=1,w(d,t.parent),h=t.parent.right),h.left.color===0&&h.right.color===0?(h.color=1,t=t.parent):(h.right.color===0&&(h.left.color=0,h.color=1,I(d,h),h=t.parent.right),h.color=t.parent.color,t.parent.color=0,h.right.color=0,w(d,t.parent),t=d.root)):(h=t.parent.left,h.color===1&&(h.color=0,t.parent.color=1,I(d,t.parent),h=t.parent.left),h.left.color===0&&h.right.color===0?(h.color=1,t=t.parent):(h.left.color===0&&(h.right.color=0,h.color=1,w(d,h),h=t.parent.left),h.color=t.parent.color,t.parent.color=0,h.left.color=0,I(d,t.parent),t=d.root));t.color=0,R()}e.rbDelete=P;function L(d,o){for(b(d,o);o!==d.root&&o.parent.color===1;)if(o.parent===o.parent.parent.left){const t=o.parent.parent.right;t.color===1?(o.parent.color=0,t.color=0,o.parent.parent.color=1,o=o.parent.parent):(o===o.parent.right&&(o=o.parent,w(d,o)),o.parent.color=0,o.parent.parent.color=1,I(d,o.parent.parent))}else{const t=o.parent.parent.left;t.color===1?(o.parent.color=0,t.color=0,o.parent.parent.color=1,o=o.parent.parent):(o===o.parent.left&&(o=o.parent,I(d,o)),o.parent.color=0,o.parent.parent.color=1,w(d,o.parent.parent))}d.root.color=0}e.fixInsert=L;function T(d,o,t,s){for(;o!==d.root&&o!==e.SENTINEL;)o.parent.left===o&&(o.parent.size_left+=t,o.parent.lf_left+=s),o=o.parent}e.updateTreeMetadata=T;function b(d,o){let t=0,s=0;if(o!==d.root){for(;o!==d.root&&o===o.parent.right;)o=o.parent;if(o!==d.root)for(o=o.parent,t=O(o.left)-o.size_left,s=A(o.left)-o.lf_left,o.size_left+=t,o.lf_left+=s;o!==d.root&&(t!==0||s!==0);)o.parent.left===o&&(o.parent.size_left+=t,o.parent.lf_left+=s),o=o.parent}}e.recomputeTreeMetadata=b}),define(ne[10],ie([0,1,33,11,25,24,34]),function(te,e,M,F,q,N,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeBase=e.StringBuffer=e.Piece=e.createLineStarts=e.createLineStartsFast=e.LineStarts=e.createUintArray=e.AverageBufferSize=void 0,e.AverageBufferSize=65535;function A(o){let t;return o[o.length-1]<65536?t=new Uint16Array(o.length):t=new Uint32Array(o.length),t.set(o,0),t}e.createUintArray=A;class R{constructor(t,s,i,h,c){this.lineStarts=t,this.cr=s,this.lf=i,this.crlf=h,this.isBasicASCII=c}}e.LineStarts=R;function w(o,t=!0){const s=[0];let i=1;for(let h=0,c=o.length;h<c;h++){const m=o.charCodeAt(h);m===13?h+1<c&&o.charCodeAt(h+1)===10?(s[i++]=h+2,h++):s[i++]=h+1:m===10&&(s[i++]=h+1)}return t?A(s):s}e.createLineStartsFast=w;function I(o,t){o.length=0,o[0]=0;let s=1,i=0,h=0,c=0,m=!0;for(let _=0,a=t.length;_<a;_++){const l=t.charCodeAt(_);l===13?_+1<a&&t.charCodeAt(_+1)===10?(c++,o[s++]=_+2,_++):(i++,o[s++]=_+1):l===10?(h++,o[s++]=_+1):m&&l!==9&&(l<32||l>126)&&(m=!1)}const y=new R(A(o),i,h,c,m);return o.length=0,y}e.createLineStarts=I;class P{constructor(t,s,i,h,c){this.bufferIndex=t,this.start=s,this.end=i,this.lineFeedCnt=h,this.length=c}}e.Piece=P;class L{constructor(t,s){this.buffer=t,this.lineStarts=s}}e.StringBuffer=L;class T{constructor(t,s){this._pieces=[],this._tree=t,this._BOM=s,this._index=0,t.root!==N.SENTINEL&&t.iterate(t.root,i=>(i!==N.SENTINEL&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class b{constructor(t){this._limit=t,this._cache=[]}get(t){for(let s=this._cache.length-1;s>=0;s--){const i=this._cache[s];if(i.nodeStartOffset<=t&&i.nodeStartOffset+i.node.piece.length>=t)return i}return null}get2(t){for(let s=this._cache.length-1;s>=0;s--){const i=this._cache[s];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<t&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=t)return i}return null}set(t){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(t)}validate(t){let s=!1;const i=this._cache;for(let h=0;h<i.length;h++){const c=i[h];if(c.node.parent===null||c.nodeStartOffset>=t){i[h]=null,s=!0;continue}}if(s){const h=[];for(const c of i)c!==null&&h.push(c);this._cache=h}}}class d{constructor(t,s,i){this.create(t,s,i)}create(t,s,i){this._buffers=[new L("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=N.SENTINEL,this._lineCnt=1,this._length=0,this._EOL=s,this._EOLLength=s.length,this._EOLNormalized=i;let h=null;for(let c=0,m=t.length;c<m;c++)if(t[c].buffer.length>0){t[c].lineStarts||(t[c].lineStarts=w(t[c].buffer));const y=new P(c+1,{line:0,column:0},{line:t[c].lineStarts.length-1,column:t[c].buffer.length-t[c].lineStarts[t[c].lineStarts.length-1]},t[c].lineStarts.length-1,t[c].buffer.length);this._buffers.push(t[c]),h=this.rbInsertRight(h,y)}this._searchCache=new b(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(t){const s=e.AverageBufferSize,i=s-Math.floor(s/3),h=i*2;let c="",m=0;const y=[];if(this.iterate(this.root,_=>{const a=this.getNodeContent(_),l=a.length;if(m<=i||m+l<h)return c+=a,m+=l,!0;const r=c.replace(/\r\n|\r|\n/g,t);return y.push(new L(r,w(r))),c=a,m=l,!0}),m>0){const _=c.replace(/\r\n|\r|\n/g,t);y.push(new L(_,w(_)))}this.create(y,t,!0)}getEOL(){return this._EOL}setEOL(t){this._EOL=t,this._EOLLength=this._EOL.length,this.normalizeEOL(t)}createSnapshot(t){return new T(this,t)}equal(t){if(this.getLength()!==t.getLength()||this.getLineCount()!==t.getLineCount())return!1;const s=0;return this.iterate(this.root,h=>{if(h===N.SENTINEL)return!0;const c=this.getNodeContent(h),m=c.length,y=t.nodeAt(s),_=t.nodeAt(s+m),a=t.getValueInRange2(y,_);return c===a})}getOffsetAt(t,s){let i=0,h=this.root;for(;h!==N.SENTINEL;)if(h.left!==N.SENTINEL&&h.lf_left+1>=t)h=h.left;else{if(h.lf_left+h.piece.lineFeedCnt+1>=t)return i+=h.size_left,i+=this.getAccumulatedValue(h,t-h.lf_left-2)+s-1;t-=h.lf_left+h.piece.lineFeedCnt,i+=h.size_left+h.piece.length,h=h.right}return i}getPositionAt(t){t=Math.floor(t),t=Math.max(0,t);let s=this.root,i=0;const h=t;for(;s!==N.SENTINEL;)if(s.size_left!==0&&s.size_left>=t)s=s.left;else if(s.size_left+s.piece.length>=t){const c=this.getIndexOf(s,t-s.size_left);if(i+=s.lf_left+c.index,c.index===0){const m=this.getOffsetAt(i+1,1),y=h-m;return new M.Position(i+1,y+1)}return new M.Position(i+1,c.remainder+1)}else if(t-=s.size_left+s.piece.length,i+=s.lf_left+s.piece.lineFeedCnt,s.right===N.SENTINEL){const c=this.getOffsetAt(i+1,1),m=h-t-c;return new M.Position(i+1,m+1)}else s=s.right;return new M.Position(1,1)}getValueInRange(t,s){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return"";const i=this.nodeAt2(t.startLineNumber,t.startColumn),h=this.nodeAt2(t.endLineNumber,t.endColumn),c=this.getValueInRange2(i,h);return s?s!==this._EOL||!this._EOLNormalized?c.replace(/\r\n|\r|\n/g,s):s===this.getEOL()&&this._EOLNormalized?c:c.replace(/\r\n|\r|\n/g,s):c}getValueInRange2(t,s){if(t.node===s.node){const y=t.node,_=this._buffers[y.piece.bufferIndex].buffer,a=this.offsetInBuffer(y.piece.bufferIndex,y.piece.start);return _.substring(a+t.remainder,a+s.remainder)}let i=t.node;const h=this._buffers[i.piece.bufferIndex].buffer,c=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let m=h.substring(c+t.remainder,c+i.piece.length);for(i=i.next();i!==N.SENTINEL;){const y=this._buffers[i.piece.bufferIndex].buffer,_=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===s.node){m+=y.substring(_,_+s.remainder);break}else m+=y.substr(_,i.piece.length);i=i.next()}return m}getLinesContent(){const t=[];let s=0,i="",h=!1;return this.iterate(this.root,c=>{if(c===N.SENTINEL)return!0;const m=c.piece;let y=m.length;if(y===0)return!0;const _=this._buffers[m.bufferIndex].buffer,a=this._buffers[m.bufferIndex].lineStarts,l=m.start.line,r=m.end.line;let u=a[l]+m.start.column;if(h&&(_.charCodeAt(u)===10&&(u++,y--),t[s++]=i,i="",h=!1,y===0))return!0;if(l===r)return!this._EOLNormalized&&_.charCodeAt(u+y-1)===13?(h=!0,i+=_.substr(u,y-1)):i+=_.substr(u,y),!0;i+=this._EOLNormalized?_.substring(u,Math.max(u,a[l+1]-this._EOLLength)):_.substring(u,a[l+1]).replace(/(\r\n|\r|\n)$/,""),t[s++]=i;for(let f=l+1;f<r;f++)i=this._EOLNormalized?_.substring(a[f],a[f+1]-this._EOLLength):_.substring(a[f],a[f+1]).replace(/(\r\n|\r|\n)$/,""),t[s++]=i;return!this._EOLNormalized&&_.charCodeAt(a[r]+m.end.column-1)===13?(h=!0,m.end.column===0?s--:i=_.substr(a[r],m.end.column-1)):i=_.substr(a[r],m.end.column),!0}),h&&(t[s++]=i,i=""),t[s++]=i,t}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(t){return this._lastVisitedLine.lineNumber===t?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=t,t===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(t):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(t,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(t).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(t){if(t.remainder===t.node.piece.length){const s=t.node.next();if(!s)return 0;const i=this._buffers[s.piece.bufferIndex],h=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);return i.buffer.charCodeAt(h)}else{const s=this._buffers[t.node.piece.bufferIndex],h=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start)+t.remainder;return s.buffer.charCodeAt(h)}}getLineCharCode(t,s){const i=this.nodeAt2(t,s+1);return this._getCharCode(i)}getLineLength(t){if(t===this.getLineCount()){const s=this.getOffsetAt(t,1);return this.getLength()-s}return this.getOffsetAt(t+1,1)-this.getOffsetAt(t,1)-this._EOLLength}getCharCode(t){const s=this.nodeAt(t);return this._getCharCode(s)}findMatchesInNode(t,s,i,h,c,m,y,_,a,l,r){const u=this._buffers[t.piece.bufferIndex],f=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start),C=this.offsetInBuffer(t.piece.bufferIndex,c),S=this.offsetInBuffer(t.piece.bufferIndex,m);let $;const j={line:0,column:0};let B,n;s._wordSeparators?(B=u.buffer.substring(C,S),n=p=>p+C,s.reset(0)):(B=u.buffer,n=p=>p,s.reset(C));do if($=s.next(B),$){if(n($.index)>=S)return l;this.positionInBuffer(t,n($.index)-f,j);const p=this.getLineFeedCnt(t.piece.bufferIndex,c,j),E=j.line===c.line?j.column-c.column+h:j.column+1,D=E+$[0].length;if(r[l++]=(0,O.createFindMatch)(new F.Range(i+p,E,i+p,D),$,_),n($.index)+$[0].length>=S||l>=a)return l}while($);return l}findMatchesLineByLine(t,s,i,h){const c=[];let m=0;const y=new O.Searcher(s.wordSeparators,s.regex);let _=this.nodeAt2(t.startLineNumber,t.startColumn);if(_===null)return[];const a=this.nodeAt2(t.endLineNumber,t.endColumn);if(a===null)return[];let l=this.positionInBuffer(_.node,_.remainder);const r=this.positionInBuffer(a.node,a.remainder);if(_.node===a.node)return this.findMatchesInNode(_.node,y,t.startLineNumber,t.startColumn,l,r,s,i,h,m,c),c;let u=t.startLineNumber,f=_.node;for(;f!==a.node;){const S=this.getLineFeedCnt(f.piece.bufferIndex,l,f.piece.end);if(S>=1){const j=this._buffers[f.piece.bufferIndex].lineStarts,B=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),n=j[l.line+S],p=u===t.startLineNumber?t.startColumn:1;if(m=this.findMatchesInNode(f,y,u,p,l,this.positionInBuffer(f,n-B),s,i,h,m,c),m>=h)return c;u+=S}const $=u===t.startLineNumber?t.startColumn-1:0;if(u===t.endLineNumber){const j=this.getLineContent(u).substring($,t.endColumn-1);return m=this._findMatchesInLine(s,y,j,t.endLineNumber,$,m,c,i,h),c}if(m=this._findMatchesInLine(s,y,this.getLineContent(u).substr($),u,$,m,c,i,h),m>=h)return c;u++,_=this.nodeAt2(u,1),f=_.node,l=this.positionInBuffer(_.node,_.remainder)}if(u===t.endLineNumber){const S=u===t.startLineNumber?t.startColumn-1:0,$=this.getLineContent(u).substring(S,t.endColumn-1);return m=this._findMatchesInLine(s,y,$,t.endLineNumber,S,m,c,i,h),c}const C=u===t.startLineNumber?t.startColumn:1;return m=this.findMatchesInNode(a.node,y,u,C,l,r,s,i,h,m,c),c}_findMatchesInLine(t,s,i,h,c,m,y,_,a){const l=t.wordSeparators;if(!_&&t.simpleSearch){const u=t.simpleSearch,f=u.length,C=i.length;let S=-f;for(;(S=i.indexOf(u,S+f))!==-1;)if((!l||(0,O.isValidMatch)(l,i,C,S,f))&&(y[m++]=new q.FindMatch(new F.Range(h,S+1+c,h,S+1+f+c),null),m>=a))return m;return m}let r;s.reset(0);do if(r=s.next(i),r&&(y[m++]=(0,O.createFindMatch)(new F.Range(h,r.index+1+c,h,r.index+1+r[0].length+c),r,_),m>=a))return m;while(r);return m}insert(t,s,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==N.SENTINEL){const{node:h,remainder:c,nodeStartOffset:m}=this.nodeAt(t),y=h.piece,_=y.bufferIndex,a=this.positionInBuffer(h,c);if(h.piece.bufferIndex===0&&y.end.line===this._lastChangeBufferPos.line&&y.end.column===this._lastChangeBufferPos.column&&m+y.length===t&&s.length<e.AverageBufferSize){this.appendToNode(h,s),this.computeBufferMetadata();return}if(m===t)this.insertContentToNodeLeft(s,h),this._searchCache.validate(t);else if(m+h.piece.length>t){const l=[];let r=new P(y.bufferIndex,a,y.end,this.getLineFeedCnt(y.bufferIndex,a,y.end),this.offsetInBuffer(_,y.end)-this.offsetInBuffer(_,a));if(this.shouldCheckCRLF()&&this.endWithCR(s)&&this.nodeCharCodeAt(h,c)===10){const S={line:r.start.line+1,column:0};r=new P(r.bufferIndex,S,r.end,this.getLineFeedCnt(r.bufferIndex,S,r.end),r.length-1),s+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(s))if(this.nodeCharCodeAt(h,c-1)===13){const S=this.positionInBuffer(h,c-1);this.deleteNodeTail(h,S),s="\r"+s,h.piece.length===0&&l.push(h)}else this.deleteNodeTail(h,a);else this.deleteNodeTail(h,a);const u=this.createNewPieces(s);r.length>0&&this.rbInsertRight(h,r);let f=h;for(let C=0;C<u.length;C++)f=this.rbInsertRight(f,u[C]);this.deleteNodes(l)}else this.insertContentToNodeRight(s,h)}else{const h=this.createNewPieces(s);let c=this.rbInsertLeft(null,h[0]);for(let m=1;m<h.length;m++)c=this.rbInsertRight(c,h[m])}this.computeBufferMetadata()}delete(t,s){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",s<=0||this.root===N.SENTINEL)return;const i=this.nodeAt(t),h=this.nodeAt(t+s),c=i.node,m=h.node;if(c===m){const u=this.positionInBuffer(c,i.remainder),f=this.positionInBuffer(c,h.remainder);if(i.nodeStartOffset===t){if(s===c.piece.length){const C=c.next();(0,N.rbDelete)(this,c),this.validateCRLFWithPrevNode(C),this.computeBufferMetadata();return}this.deleteNodeHead(c,f),this._searchCache.validate(t),this.validateCRLFWithPrevNode(c),this.computeBufferMetadata();return}if(i.nodeStartOffset+c.piece.length===t+s){this.deleteNodeTail(c,u),this.validateCRLFWithNextNode(c),this.computeBufferMetadata();return}this.shrinkNode(c,u,f),this.computeBufferMetadata();return}const y=[],_=this.positionInBuffer(c,i.remainder);this.deleteNodeTail(c,_),this._searchCache.validate(t),c.piece.length===0&&y.push(c);const a=this.positionInBuffer(m,h.remainder);this.deleteNodeHead(m,a),m.piece.length===0&&y.push(m);const l=c.next();for(let u=l;u!==N.SENTINEL&&u!==m;u=u.next())y.push(u);const r=c.piece.length===0?c.prev():c;this.deleteNodes(y),this.validateCRLFWithNextNode(r),this.computeBufferMetadata()}insertContentToNodeLeft(t,s){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.startWithLF(s)){const m=s.piece,y={line:m.start.line+1,column:0},_=new P(m.bufferIndex,y,m.end,this.getLineFeedCnt(m.bufferIndex,y,m.end),m.length-1);s.piece=_,t+=`
`,(0,N.updateTreeMetadata)(this,s,-1,-1),s.piece.length===0&&i.push(s)}const h=this.createNewPieces(t);let c=this.rbInsertLeft(s,h[h.length-1]);for(let m=h.length-2;m>=0;m--)c=this.rbInsertLeft(c,h[m]);this.validateCRLFWithPrevNode(c),this.deleteNodes(i)}insertContentToNodeRight(t,s){this.adjustCarriageReturnFromNext(t,s)&&(t+=`
`);const i=this.createNewPieces(t),h=this.rbInsertRight(s,i[0]);let c=h;for(let m=1;m<i.length;m++)c=this.rbInsertRight(c,i[m]);this.validateCRLFWithPrevNode(h)}positionInBuffer(t,s,i){const h=t.piece,c=t.piece.bufferIndex,m=this._buffers[c].lineStarts,_=m[h.start.line]+h.start.column+s;let a=h.start.line,l=h.end.line,r=0,u=0,f=0;for(;a<=l&&(r=a+(l-a)/2|0,f=m[r],r!==l);)if(u=m[r+1],_<f)l=r-1;else if(_>=u)a=r+1;else break;return i?(i.line=r,i.column=_-f,null):{line:r,column:_-f}}getLineFeedCnt(t,s,i){if(i.column===0)return i.line-s.line;const h=this._buffers[t].lineStarts;if(i.line===h.length-1)return i.line-s.line;const c=h[i.line+1],m=h[i.line]+i.column;if(c>m+1)return i.line-s.line;const y=m-1;return this._buffers[t].buffer.charCodeAt(y)===13?i.line-s.line+1:i.line-s.line}offsetInBuffer(t,s){return this._buffers[t].lineStarts[s.line]+s.column}deleteNodes(t){for(let s=0;s<t.length;s++)(0,N.rbDelete)(this,t[s])}createNewPieces(t){if(t.length>e.AverageBufferSize){const l=[];for(;t.length>e.AverageBufferSize;){const u=t.charCodeAt(e.AverageBufferSize-1);let f;u===13||u>=55296&&u<=56319?(f=t.substring(0,e.AverageBufferSize-1),t=t.substring(e.AverageBufferSize-1)):(f=t.substring(0,e.AverageBufferSize),t=t.substring(e.AverageBufferSize));const C=w(f);l.push(new P(this._buffers.length,{line:0,column:0},{line:C.length-1,column:f.length-C[C.length-1]},C.length-1,f.length)),this._buffers.push(new L(f,C))}const r=w(t);return l.push(new P(this._buffers.length,{line:0,column:0},{line:r.length-1,column:t.length-r[r.length-1]},r.length-1,t.length)),this._buffers.push(new L(t,r)),l}let s=this._buffers[0].buffer.length;const i=w(t,!1);let h=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===s&&s!==0&&this.startWithLF(t)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},h=this._lastChangeBufferPos;for(let l=0;l<i.length;l++)i[l]+=s+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+t,s+=1}else{if(s!==0)for(let l=0;l<i.length;l++)i[l]+=s;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=t}const c=this._buffers[0].buffer.length,m=this._buffers[0].lineStarts.length-1,y=c-this._buffers[0].lineStarts[m],_={line:m,column:y},a=new P(0,h,_,this.getLineFeedCnt(0,h,_),c-s);return this._lastChangeBufferPos=_,[a]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(t,s=0){let i=this.root,h="";const c=this._searchCache.get2(t);if(c){i=c.node;const m=this.getAccumulatedValue(i,t-c.nodeStartLineNumber-1),y=this._buffers[i.piece.bufferIndex].buffer,_=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(c.nodeStartLineNumber+i.piece.lineFeedCnt===t)h=y.substring(_+m,_+i.piece.length);else{const a=this.getAccumulatedValue(i,t-c.nodeStartLineNumber);return y.substring(_+m,_+a-s)}}else{let m=0;const y=t;for(;i!==N.SENTINEL;)if(i.left!==N.SENTINEL&&i.lf_left>=t-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>t-1){const _=this.getAccumulatedValue(i,t-i.lf_left-2),a=this.getAccumulatedValue(i,t-i.lf_left-1),l=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return m+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:m,nodeStartLineNumber:y-(t-1-i.lf_left)}),l.substring(r+_,r+a-s)}else if(i.lf_left+i.piece.lineFeedCnt===t-1){const _=this.getAccumulatedValue(i,t-i.lf_left-2),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);h=a.substring(l+_,l+i.piece.length);break}else t-=i.lf_left+i.piece.lineFeedCnt,m+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==N.SENTINEL;){const m=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const y=this.getAccumulatedValue(i,0),_=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return h+=m.substring(_,_+y-s),h}else{const y=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);h+=m.substr(y,i.piece.length)}i=i.next()}return h}computeBufferMetadata(){let t=this.root,s=1,i=0;for(;t!==N.SENTINEL;)s+=t.lf_left+t.piece.lineFeedCnt,i+=t.size_left+t.piece.length,t=t.right;this._lineCnt=s,this._length=i,this._searchCache.validate(this._length)}getIndexOf(t,s){const i=t.piece,h=this.positionInBuffer(t,s),c=h.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===s){const m=this.getLineFeedCnt(t.piece.bufferIndex,i.start,h);if(m!==c)return{index:m,remainder:0}}return{index:c,remainder:h.column}}getAccumulatedValue(t,s){if(s<0)return 0;const i=t.piece,h=this._buffers[i.bufferIndex].lineStarts,c=i.start.line+s+1;return c>i.end.line?h[i.end.line]+i.end.column-h[i.start.line]-i.start.column:h[c]-h[i.start.line]-i.start.column}deleteNodeTail(t,s){const i=t.piece,h=i.lineFeedCnt,c=this.offsetInBuffer(i.bufferIndex,i.end),m=s,y=this.offsetInBuffer(i.bufferIndex,m),_=this.getLineFeedCnt(i.bufferIndex,i.start,m),a=_-h,l=y-c,r=i.length+l;t.piece=new P(i.bufferIndex,i.start,m,_,r),(0,N.updateTreeMetadata)(this,t,l,a)}deleteNodeHead(t,s){const i=t.piece,h=i.lineFeedCnt,c=this.offsetInBuffer(i.bufferIndex,i.start),m=s,y=this.getLineFeedCnt(i.bufferIndex,m,i.end),_=this.offsetInBuffer(i.bufferIndex,m),a=y-h,l=c-_,r=i.length+l;t.piece=new P(i.bufferIndex,m,i.end,y,r),(0,N.updateTreeMetadata)(this,t,l,a)}shrinkNode(t,s,i){const h=t.piece,c=h.start,m=h.end,y=h.length,_=h.lineFeedCnt,a=s,l=this.getLineFeedCnt(h.bufferIndex,h.start,a),r=this.offsetInBuffer(h.bufferIndex,s)-this.offsetInBuffer(h.bufferIndex,c);t.piece=new P(h.bufferIndex,h.start,a,l,r),(0,N.updateTreeMetadata)(this,t,r-y,l-_);const u=new P(h.bufferIndex,i,m,this.getLineFeedCnt(h.bufferIndex,i,m),this.offsetInBuffer(h.bufferIndex,m)-this.offsetInBuffer(h.bufferIndex,i)),f=this.rbInsertRight(t,u);this.validateCRLFWithPrevNode(f)}appendToNode(t,s){this.adjustCarriageReturnFromNext(s,t)&&(s+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(s)&&this.endWithCR(t),h=this._buffers[0].buffer.length;this._buffers[0].buffer+=s;const c=w(s,!1);for(let f=0;f<c.length;f++)c[f]+=h;if(i){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:h-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(c.slice(1));const m=this._buffers[0].lineStarts.length-1,y=this._buffers[0].buffer.length-this._buffers[0].lineStarts[m],_={line:m,column:y},a=t.piece.length+s.length,l=t.piece.lineFeedCnt,r=this.getLineFeedCnt(0,t.piece.start,_),u=r-l;t.piece=new P(t.piece.bufferIndex,t.piece.start,_,r,a),this._lastChangeBufferPos=_,(0,N.updateTreeMetadata)(this,t,s.length,u)}nodeAt(t){let s=this.root;const i=this._searchCache.get(t);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:t-i.nodeStartOffset};let h=0;for(;s!==N.SENTINEL;)if(s.size_left>t)s=s.left;else if(s.size_left+s.piece.length>=t){h+=s.size_left;const c={node:s,remainder:t-s.size_left,nodeStartOffset:h};return this._searchCache.set(c),c}else t-=s.size_left+s.piece.length,h+=s.size_left+s.piece.length,s=s.right;return null}nodeAt2(t,s){let i=this.root,h=0;for(;i!==N.SENTINEL;)if(i.left!==N.SENTINEL&&i.lf_left>=t-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>t-1){const c=this.getAccumulatedValue(i,t-i.lf_left-2),m=this.getAccumulatedValue(i,t-i.lf_left-1);return h+=i.size_left,{node:i,remainder:Math.min(c+s-1,m),nodeStartOffset:h}}else if(i.lf_left+i.piece.lineFeedCnt===t-1){const c=this.getAccumulatedValue(i,t-i.lf_left-2);if(c+s-1<=i.piece.length)return{node:i,remainder:c+s-1,nodeStartOffset:h};s-=i.piece.length-c;break}else t-=i.lf_left+i.piece.lineFeedCnt,h+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==N.SENTINEL;){if(i.piece.lineFeedCnt>0){const c=this.getAccumulatedValue(i,0),m=this.offsetOfNode(i);return{node:i,remainder:Math.min(s-1,c),nodeStartOffset:m}}else if(i.piece.length>=s-1){const c=this.offsetOfNode(i);return{node:i,remainder:s-1,nodeStartOffset:c}}else s-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(t,s){if(t.piece.lineFeedCnt<1)return-1;const i=this._buffers[t.piece.bufferIndex],h=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start)+s;return i.buffer.charCodeAt(h)}offsetOfNode(t){if(!t)return 0;let s=t.size_left;for(;t!==this.root;)t.parent.right===t&&(s+=t.parent.size_left+t.parent.piece.length),t=t.parent;return s}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(t){if(typeof t=="string")return t.charCodeAt(0)===10;if(t===N.SENTINEL||t.piece.lineFeedCnt===0)return!1;const s=t.piece,i=this._buffers[s.bufferIndex].lineStarts,h=s.start.line,c=i[h]+s.start.column;return h===i.length-1||i[h+1]>c+1?!1:this._buffers[s.bufferIndex].buffer.charCodeAt(c)===10}endWithCR(t){return typeof t=="string"?t.charCodeAt(t.length-1)===13:t===N.SENTINEL||t.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(t,t.piece.length-1)===13}validateCRLFWithPrevNode(t){if(this.shouldCheckCRLF()&&this.startWithLF(t)){const s=t.prev();this.endWithCR(s)&&this.fixCRLF(s,t)}}validateCRLFWithNextNode(t){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const s=t.next();this.startWithLF(s)&&this.fixCRLF(t,s)}}fixCRLF(t,s){const i=[],h=this._buffers[t.piece.bufferIndex].lineStarts;let c;t.piece.end.column===0?c={line:t.piece.end.line-1,column:h[t.piece.end.line]-h[t.piece.end.line-1]-1}:c={line:t.piece.end.line,column:t.piece.end.column-1};const m=t.piece.length-1,y=t.piece.lineFeedCnt-1;t.piece=new P(t.piece.bufferIndex,t.piece.start,c,y,m),(0,N.updateTreeMetadata)(this,t,-1,-1),t.piece.length===0&&i.push(t);const _={line:s.piece.start.line+1,column:0},a=s.piece.length-1,l=this.getLineFeedCnt(s.piece.bufferIndex,_,s.piece.end);s.piece=new P(s.piece.bufferIndex,_,s.piece.end,l,a),(0,N.updateTreeMetadata)(this,s,-1,-1),s.piece.length===0&&i.push(s);const r=this.createNewPieces(`\r
`);this.rbInsertRight(t,r[0]);for(let u=0;u<i.length;u++)(0,N.rbDelete)(this,i[u])}adjustCarriageReturnFromNext(t,s){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const i=s.next();if(this.startWithLF(i)){if(t+=`
`,i.piece.length===1)(0,N.rbDelete)(this,i);else{const h=i.piece,c={line:h.start.line+1,column:0},m=h.length-1,y=this.getLineFeedCnt(h.bufferIndex,c,h.end);i.piece=new P(h.bufferIndex,c,h.end,y,m),(0,N.updateTreeMetadata)(this,i,-1,-1)}return!0}}return!1}iterate(t,s){if(t===N.SENTINEL)return s(N.SENTINEL);const i=this.iterate(t.left,s);return i&&s(t)&&this.iterate(t.right,s)}getNodeContent(t){if(t===N.SENTINEL)return"";const s=this._buffers[t.piece.bufferIndex],i=t.piece,h=this.offsetInBuffer(i.bufferIndex,i.start),c=this.offsetInBuffer(i.bufferIndex,i.end);return s.buffer.substring(h,c)}getPieceContent(t){const s=this._buffers[t.bufferIndex],i=this.offsetInBuffer(t.bufferIndex,t.start),h=this.offsetInBuffer(t.bufferIndex,t.end);return s.buffer.substring(i,h)}rbInsertRight(t,s){const i=new N.TreeNode(s,1);if(i.left=N.SENTINEL,i.right=N.SENTINEL,i.parent=N.SENTINEL,i.size_left=0,i.lf_left=0,this.root===N.SENTINEL)this.root=i,i.color=0;else if(t.right===N.SENTINEL)t.right=i,i.parent=t;else{const c=(0,N.leftest)(t.right);c.left=i,i.parent=c}return(0,N.fixInsert)(this,i),i}rbInsertLeft(t,s){const i=new N.TreeNode(s,1);if(i.left=N.SENTINEL,i.right=N.SENTINEL,i.parent=N.SENTINEL,i.size_left=0,i.lf_left=0,this.root===N.SENTINEL)this.root=i,i.color=0;else if(t.left===N.SENTINEL)t.left=i,i.parent=t;else{const h=(0,N.righttest)(t.left);h.right=i,i.parent=h}return(0,N.fixInsert)(this,i),i}getContentOfSubTree(t){let s="";return this.iterate(t,i=>(s+=this.getNodeContent(i),!0)),s}}e.PieceTreeBase=d}),define(ne[26],ie([0,1,19,2,11,25,10,21,23,6]),function(te,e,M,F,q,N,O,A,R,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBuffer=void 0;class I extends w.Disposable{constructor(L,T,b,d,o,t,s){super();this._onDidChangeContent=this._register(new M.Emitter),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=T,this._mightContainNonBasicASCII=!t,this._mightContainRTL=d,this._mightContainUnusualLineTerminators=o,this._pieceTree=new O.PieceTreeBase(L,b,s)}equals(L){return!(L instanceof I)||this._BOM!==L._BOM||this.getEOL()!==L.getEOL()?!1:this._pieceTree.equal(L._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(L){return this._pieceTree.createSnapshot(L?this._BOM:"")}getOffsetAt(L,T){return this._pieceTree.getOffsetAt(L,T)}getPositionAt(L){return this._pieceTree.getPositionAt(L)}getRangeAt(L,T){const b=L+T,d=this.getPositionAt(L),o=this.getPositionAt(b);return new q.Range(d.lineNumber,d.column,o.lineNumber,o.column)}getValueInRange(L,T=0){if(L.isEmpty())return"";const b=this._getEndOfLine(T);return this._pieceTree.getValueInRange(L,b)}getValueLengthInRange(L,T=0){if(L.isEmpty())return 0;if(L.startLineNumber===L.endLineNumber)return L.endColumn-L.startColumn;const b=this.getOffsetAt(L.startLineNumber,L.startColumn);return this.getOffsetAt(L.endLineNumber,L.endColumn)-b}getCharacterCountInRange(L,T=0){if(this._mightContainNonBasicASCII){let b=0;const d=L.startLineNumber,o=L.endLineNumber;for(let t=d;t<=o;t++){const s=this.getLineContent(t),i=t===d?L.startColumn-1:0,h=t===o?L.endColumn-1:s.length;for(let c=i;c<h;c++)F.isHighSurrogate(s.charCodeAt(c))?(b=b+1,c=c+1):b=b+1}return b+=this._getEndOfLine(T).length*(o-d),b}return this.getValueLengthInRange(L,T)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(L){return this._pieceTree.getLineContent(L)}getLineCharCode(L,T){return this._pieceTree.getLineCharCode(L,T)}getCharCode(L){return this._pieceTree.getCharCode(L)}getLineLength(L){return this._pieceTree.getLineLength(L)}getLineMinColumn(L){return 1}getLineMaxColumn(L){return this.getLineLength(L)+1}getLineFirstNonWhitespaceColumn(L){const T=F.firstNonWhitespaceIndex(this.getLineContent(L));return T===-1?0:T+1}getLineLastNonWhitespaceColumn(L){const T=F.lastNonWhitespaceIndex(this.getLineContent(L));return T===-1?0:T+2}_getEndOfLine(L){switch(L){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(L){this._pieceTree.setEOL(L)}applyEdits(L,T,b){let d=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,t=this._mightContainNonBasicASCII,s=!0,i=[];for(let l=0;l<L.length;l++){const r=L[l];s&&r._isTracked&&(s=!1);const u=r.range;if(r.text){let j=!0;t||(j=!F.isBasicASCII(r.text),t=j),!d&&j&&(d=F.containsRTL(r.text)),!o&&j&&(o=F.containsUnusualLineTerminators(r.text))}let f="",C=0,S=0,$=0;if(r.text){let j;[C,S,$,j]=(0,A.countEOL)(r.text);const B=this.getEOL();j===0||j===(B===`\r
`?2:1)?f=r.text:f=r.text.replace(/\r\n|\r|\n/g,B)}i[l]={sortIndex:l,identifier:r.identifier||null,range:u,rangeOffset:this.getOffsetAt(u.startLineNumber,u.startColumn),rangeLength:this.getValueLengthInRange(u),text:f,eolCount:C,firstLineLength:S,lastLineLength:$,forceMoveMarkers:Boolean(r.forceMoveMarkers),isAutoWhitespaceEdit:r.isAutoWhitespaceEdit||!1}}i.sort(I._sortOpsAscending);let h=!1;for(let l=0,r=i.length-1;l<r;l++){const u=i[l].range.getEndPosition(),f=i[l+1].range.getStartPosition();if(f.isBeforeOrEqual(u)){if(f.isBefore(u))throw new Error("Overlapping ranges are not allowed!");h=!0}}s&&(i=this._reduceOperations(i));const c=b||T?I._getInverseEditRanges(i):[],m=[];if(T)for(let l=0;l<i.length;l++){const r=i[l],u=c[l];if(r.isAutoWhitespaceEdit&&r.range.isEmpty())for(let f=u.startLineNumber;f<=u.endLineNumber;f++){let C="";f===u.startLineNumber&&(C=this.getLineContent(r.range.startLineNumber),F.firstNonWhitespaceIndex(C)!==-1)||m.push({lineNumber:f,oldContent:C})}}let y=null;if(b){let l=0;y=[];for(let r=0;r<i.length;r++){const u=i[r],f=c[r],C=this.getValueInRange(u.range),S=u.rangeOffset+l;l+=u.text.length-C.length,y[r]={sortIndex:u.sortIndex,identifier:u.identifier,range:f,text:C,textChange:new R.TextChange(u.rangeOffset,C,S,u.text)}}h||y.sort((r,u)=>r.sortIndex-u.sortIndex)}this._mightContainRTL=d,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=t;const _=this._doApplyEdits(i);let a=null;if(T&&m.length>0){m.sort((l,r)=>r.lineNumber-l.lineNumber),a=[];for(let l=0,r=m.length;l<r;l++){const u=m[l].lineNumber;if(l>0&&m[l-1].lineNumber===u)continue;const f=m[l].oldContent,C=this.getLineContent(u);C.length===0||C===f||F.firstNonWhitespaceIndex(C)!==-1||a.push(u)}}return this._onDidChangeContent.fire(),new N.ApplyEditsResult(y,_,a)}_reduceOperations(L){return L.length<1e3?L:[this._toSingleEditOperation(L)]}_toSingleEditOperation(L){let T=!1;const b=L[0].range,d=L[L.length-1].range,o=new q.Range(b.startLineNumber,b.startColumn,d.endLineNumber,d.endColumn);let t=b.startLineNumber,s=b.startColumn;const i=[];for(let _=0,a=L.length;_<a;_++){const l=L[_],r=l.range;T=T||l.forceMoveMarkers,i.push(this.getValueInRange(new q.Range(t,s,r.startLineNumber,r.startColumn))),l.text.length>0&&i.push(l.text),t=r.endLineNumber,s=r.endColumn}const h=i.join(""),[c,m,y]=(0,A.countEOL)(h);return{sortIndex:0,identifier:L[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:h,eolCount:c,firstLineLength:m,lastLineLength:y,forceMoveMarkers:T,isAutoWhitespaceEdit:!1}}_doApplyEdits(L){L.sort(I._sortOpsDescending);const T=[];for(let b=0;b<L.length;b++){const d=L[b],o=d.range.startLineNumber,t=d.range.startColumn,s=d.range.endLineNumber,i=d.range.endColumn;if(o===s&&t===i&&d.text.length===0)continue;d.text?(this._pieceTree.delete(d.rangeOffset,d.rangeLength),this._pieceTree.insert(d.rangeOffset,d.text,!0)):this._pieceTree.delete(d.rangeOffset,d.rangeLength);const h=new q.Range(o,t,s,i);T.push({range:h,rangeLength:d.rangeLength,text:d.text,rangeOffset:d.rangeOffset,forceMoveMarkers:d.forceMoveMarkers})}return T}findMatchesLineByLine(L,T,b,d){return this._pieceTree.findMatchesLineByLine(L,T,b,d)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(L,T){const b=L.startLineNumber,d=L.startColumn,[o,t,s]=(0,A.countEOL)(T);let i;if(T.length>0){const h=o+1;h===1?i=new q.Range(b,d,b,d+t):i=new q.Range(b,d,b+h-1,s+1)}else i=new q.Range(b,d,b,d);return i}static _getInverseEditRanges(L){const T=[];let b=0,d=0,o=null;for(let t=0,s=L.length;t<s;t++){const i=L[t];let h,c;o?o.range.endLineNumber===i.range.startLineNumber?(h=b,c=d+(i.range.startColumn-o.range.endColumn)):(h=b+(i.range.startLineNumber-o.range.endLineNumber),c=i.range.startColumn):(h=i.range.startLineNumber,c=i.range.startColumn);let m;if(i.text.length>0){const y=i.eolCount+1;y===1?m=new q.Range(h,c,h,c+i.firstLineLength):m=new q.Range(h,c,h+y-1,i.lastLineLength+1)}else m=new q.Range(h,c,h,c);b=m.endLineNumber,d=m.endColumn,T.push(m),o=i}return T}static _sortOpsAscending(L,T){const b=q.Range.compareRangesUsingEnds(L.range,T.range);return b===0?L.sortIndex-T.sortIndex:b}static _sortOpsDescending(L,T){const b=q.Range.compareRangesUsingEnds(L.range,T.range);return b===0?T.sortIndex-L.sortIndex:-b}}e.PieceTreeTextBuffer=I}),define(ne[27],ie([0,1,2,10,26]),function(te,e,M,F,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBufferBuilder=e.PieceTreeTextBufferFactory=void 0;class N{constructor(R,w,I,P,L,T,b,d,o){this._chunks=R,this._bom=w,this._cr=I,this._lf=P,this._crlf=L,this._containsRTL=T,this._containsUnusualLineTerminators=b,this._isBasicASCII=d,this._normalizeEOL=o}_getEOL(R){const w=this._cr+this._lf+this._crlf,I=this._cr+this._crlf;return w===0?R===1?`
`:`\r
`:I>w/2?`\r
`:`
`}create(R){const w=this._getEOL(R),I=this._chunks;if(this._normalizeEOL&&(w===`\r
`&&(this._cr>0||this._lf>0)||w===`
`&&(this._cr>0||this._crlf>0)))for(let L=0,T=I.length;L<T;L++){const b=I[L].buffer.replace(/\r\n|\r|\n/g,w),d=(0,F.createLineStartsFast)(b);I[L]=new F.StringBuffer(b,d)}const P=new q.PieceTreeTextBuffer(I,this._bom,w,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:P,disposable:P}}getFirstLineText(R){return this._chunks[0].buffer.substr(0,R).split(/\r\n|\r|\n/)[0]}}e.PieceTreeTextBufferFactory=N;class O{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(R){if(R.length===0)return;this.chunks.length===0&&M.startsWithUTF8BOM(R)&&(this.BOM=M.UTF8_BOM_CHARACTER,R=R.substr(1));const w=R.charCodeAt(R.length-1);w===13||w>=55296&&w<=56319?(this._acceptChunk1(R.substr(0,R.length-1),!1),this._hasPreviousChar=!0,this._previousChar=w):(this._acceptChunk1(R,!1),this._hasPreviousChar=!1,this._previousChar=w)}_acceptChunk1(R,w){!w&&R.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+R):this._acceptChunk2(R))}_acceptChunk2(R){const w=(0,F.createLineStarts)(this._tmpLineStarts,R);this.chunks.push(new F.StringBuffer(R,w.lineStarts)),this.cr+=w.cr,this.lf+=w.lf,this.crlf+=w.crlf,this.isBasicASCII&&(this.isBasicASCII=w.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=M.containsRTL(R)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=M.containsUnusualLineTerminators(R))}finish(R=!0){return this._finish(),new N(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,R)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const R=this.chunks[this.chunks.length-1];R.buffer+=String.fromCharCode(this._previousChar);const w=(0,F.createLineStartsFast)(R.buffer);R.lineStarts=w,this._previousChar===13&&this.cr++}}}e.PieceTreeTextBufferBuilder=O}),define(ne[28],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var M;(function(O){O.serviceIds=new Map,O.DI_TARGET="$di$target",O.DI_DEPENDENCIES="$di$dependencies";function A(R){return R[O.DI_DEPENDENCIES]||[]}O.getServiceDependencies=A})(M=e._util||(e._util={})),e.IInstantiationService=q("instantiationService");function F(O,A,R){A[M.DI_TARGET]===A?A[M.DI_DEPENDENCIES].push({id:O,index:R}):(A[M.DI_DEPENDENCIES]=[{id:O,index:R}],A[M.DI_TARGET]=A)}function q(O){if(M.serviceIds.has(O))return M.serviceIds.get(O);const A=function(R,w,I){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");F(A,R,I)};return A.toString=()=>O,M.serviceIds.set(O,A),A}e.createDecorator=q;function N(O){return O}e.refineServiceDecorator=N}),define(ne[29],ie([0,1,3,2,28]),function(te,e,M,F,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.implies=e.SET_CONTEXT_COMMAND_ID=e.IContextKeyService=e.RawContextKey=e.ContextKeyNotRegexExpr=e.ContextKeyRegexExpr=e.ContextKeySmallerEqualsExpr=e.ContextKeySmallerExpr=e.ContextKeyGreaterEqualsExpr=e.ContextKeyGreaterExpr=e.ContextKeyNotExpr=e.ContextKeyNotEqualsExpr=e.ContextKeyNotInExpr=e.ContextKeyInExpr=e.ContextKeyEqualsExpr=e.ContextKeyDefinedExpr=e.ContextKeyTrueExpr=e.ContextKeyFalseExpr=e.expressionsAreEqualWithConstantSubstitution=e.ContextKeyExpr=e.ContextKeyExprType=void 0;const N=new Map;N.set("false",!1),N.set("true",!0),N.set("isMac",M.isMacintosh),N.set("isLinux",M.isLinux),N.set("isWindows",M.isWindows),N.set("isWeb",M.isWeb),N.set("isMacNative",M.isMacintosh&&!M.isWeb),N.set("isEdge",M.isEdge),N.set("isFirefox",M.isFirefox),N.set("isChrome",M.isChrome),N.set("isSafari",M.isSafari);const O=Object.prototype.hasOwnProperty;var A;(function(B){B[B.False=0]="False",B[B.True=1]="True",B[B.Defined=2]="Defined",B[B.Not=3]="Not",B[B.Equals=4]="Equals",B[B.NotEquals=5]="NotEquals",B[B.And=6]="And",B[B.Regex=7]="Regex",B[B.NotRegex=8]="NotRegex",B[B.Or=9]="Or",B[B.In=10]="In",B[B.NotIn=11]="NotIn",B[B.Greater=12]="Greater",B[B.GreaterEquals=13]="GreaterEquals",B[B.Smaller=14]="Smaller",B[B.SmallerEquals=15]="SmallerEquals"})(A=e.ContextKeyExprType||(e.ContextKeyExprType={}));class R{static false(){return P.INSTANCE}static true(){return L.INSTANCE}static has(n){return T.create(n)}static equals(n,p){return b.create(n,p)}static notEquals(n,p){return t.create(n,p)}static regex(n,p){return _.create(n,p)}static in(n,p){return d.create(n,p)}static notIn(n,p){return o.create(n,p)}static not(n){return s.create(n)}static and(...n){return r.create(n,null)}static or(...n){return u.create(n,null,!0)}static greater(n,p){return h.create(n,p)}static greaterEquals(n,p){return c.create(n,p)}static smaller(n,p){return m.create(n,p)}static smallerEquals(n,p){return y.create(n,p)}static deserialize(n,p=!1){if(!!n)return this._deserializeOrExpression(n,p)}static _deserializeOrExpression(n,p){const E=n.split("||");return u.create(E.map(D=>this._deserializeAndExpression(D,p)),null,!0)}static _deserializeAndExpression(n,p){const E=n.split("&&");return r.create(E.map(D=>this._deserializeOne(D,p)),null)}static _deserializeOne(n,p){if(n=n.trim(),n.indexOf("!=")>=0){const E=n.split("!=");return t.create(E[0].trim(),this._deserializeValue(E[1],p))}if(n.indexOf("==")>=0){const E=n.split("==");return b.create(E[0].trim(),this._deserializeValue(E[1],p))}if(n.indexOf("=~")>=0){const E=n.split("=~");return _.create(E[0].trim(),this._deserializeRegexValue(E[1],p))}if(n.indexOf(" not in ")>=0){const E=n.split(" not in ");return o.create(E[0].trim(),E[1].trim())}if(n.indexOf(" in ")>=0){const E=n.split(" in ");return d.create(E[0].trim(),E[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(n)){const E=n.split(">=");return c.create(E[0].trim(),E[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(n)){const E=n.split(">");return h.create(E[0].trim(),E[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(n)){const E=n.split("<=");return y.create(E[0].trim(),E[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(n)){const E=n.split("<");return m.create(E[0].trim(),E[1].trim())}return/^\!\s*/.test(n)?s.create(n.substr(1).trim()):T.create(n)}static _deserializeValue(n,p){if(n=n.trim(),n==="true")return!0;if(n==="false")return!1;const E=/^'([^']*)'$/.exec(n);return E?E[1].trim():n}static _deserializeRegexValue(n,p){if((0,F.isFalsyOrWhitespace)(n)){if(p)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const E=n.indexOf("/"),D=n.lastIndexOf("/");if(E===D||E<0){if(p)throw new Error(`bad regexp-value '${n}', missing /-enclosure`);return console.warn(`bad regexp-value '${n}', missing /-enclosure`),null}const G=n.slice(E+1,D),Y=n[D+1]==="i"?"i":"";try{return new RegExp(G,Y)}catch(J){if(p)throw new Error(`bad regexp-value '${n}', parse error: ${J}`);return console.warn(`bad regexp-value '${n}', parse error: ${J}`),null}}}e.ContextKeyExpr=R;function w(B,n){const p=B?B.substituteConstants():void 0,E=n?n.substituteConstants():void 0;return!p&&!E?!0:!p||!E?!1:p.equals(E)}e.expressionsAreEqualWithConstantSubstitution=w;function I(B,n){return B.cmp(n)}class P{constructor(){this.type=0}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!1}serialize(){return"false"}keys(){return[]}map(n){return this}negate(){return L.INSTANCE}}e.ContextKeyFalseExpr=P,P.INSTANCE=new P;class L{constructor(){this.type=1}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!0}serialize(){return"true"}keys(){return[]}map(n){return this}negate(){return P.INSTANCE}}e.ContextKeyTrueExpr=L,L.INSTANCE=new L;class T{constructor(n,p){this.key=n,this.negated=p,this.type=2}static create(n,p=null){const E=N.get(n);return typeof E=="boolean"?E?L.INSTANCE:P.INSTANCE:new T(n,p)}cmp(n){return n.type!==this.type?this.type-n.type:C(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=N.get(this.key);return typeof n=="boolean"?n?L.INSTANCE:P.INSTANCE:this}evaluate(n){return!!n.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(n){return n.mapDefined(this.key)}negate(){return this.negated||(this.negated=s.create(this.key,this)),this.negated}}e.ContextKeyDefinedExpr=T;class b{constructor(n,p,E){this.key=n,this.value=p,this.negated=E,this.type=4}static create(n,p,E=null){if(typeof p=="boolean")return p?T.create(n,E):s.create(n,E);const D=N.get(n);return typeof D=="boolean"?p===(D?"true":"false")?L.INSTANCE:P.INSTANCE:new b(n,p,E)}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=N.get(this.key);if(typeof n=="boolean"){const p=n?"true":"false";return this.value===p?L.INSTANCE:P.INSTANCE}return this}evaluate(n){return n.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(n){return n.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=t.create(this.key,this.value,this)),this.negated}}e.ContextKeyEqualsExpr=b;class d{constructor(n,p){this.key=n,this.valueKey=p,this.type=10,this.negated=null}static create(n,p){return new d(n,p)}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.valueKey,n.key,n.valueKey)}equals(n){return n.type===this.type?this.key===n.key&&this.valueKey===n.valueKey:!1}substituteConstants(){return this}evaluate(n){const p=n.getValue(this.valueKey),E=n.getValue(this.key);return Array.isArray(p)?p.includes(E):typeof E=="string"&&typeof p=="object"&&p!==null?O.call(p,E):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(n){return n.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=o.create(this.key,this.valueKey)),this.negated}}e.ContextKeyInExpr=d;class o{constructor(n,p){this.key=n,this.valueKey=p,this.type=11,this._negated=d.create(n,p)}static create(n,p){return new o(n,p)}cmp(n){return n.type!==this.type?this.type-n.type:this._negated.cmp(n._negated)}equals(n){return n.type===this.type?this._negated.equals(n._negated):!1}substituteConstants(){return this}evaluate(n){return!this._negated.evaluate(n)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(n){return n.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}}e.ContextKeyNotInExpr=o;class t{constructor(n,p,E){this.key=n,this.value=p,this.negated=E,this.type=5}static create(n,p,E=null){if(typeof p=="boolean")return p?s.create(n,E):T.create(n,E);const D=N.get(n);return typeof D=="boolean"?p===(D?"true":"false")?P.INSTANCE:L.INSTANCE:new t(n,p,E)}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=N.get(this.key);if(typeof n=="boolean"){const p=n?"true":"false";return this.value===p?P.INSTANCE:L.INSTANCE}return this}evaluate(n){return n.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(n){return n.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=b.create(this.key,this.value,this)),this.negated}}e.ContextKeyNotEqualsExpr=t;class s{constructor(n,p){this.key=n,this.negated=p,this.type=3}static create(n,p=null){const E=N.get(n);return typeof E=="boolean"?E?P.INSTANCE:L.INSTANCE:new s(n,p)}cmp(n){return n.type!==this.type?this.type-n.type:C(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=N.get(this.key);return typeof n=="boolean"?n?P.INSTANCE:L.INSTANCE:this}evaluate(n){return!n.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(n){return n.mapNot(this.key)}negate(){return this.negated||(this.negated=T.create(this.key,this)),this.negated}}e.ContextKeyNotExpr=s;function i(B,n){if(typeof B=="string"){const p=parseFloat(B);isNaN(p)||(B=p)}return typeof B=="string"||typeof B=="number"?n(B):P.INSTANCE}class h{constructor(n,p,E){this.key=n,this.value=p,this.negated=E,this.type=12}static create(n,p,E=null){return i(p,D=>new h(n,D,E))}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=y.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterExpr=h;class c{constructor(n,p,E){this.key=n,this.value=p,this.negated=E,this.type=13}static create(n,p,E=null){return i(p,D=>new c(n,D,E))}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=m.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterEqualsExpr=c;class m{constructor(n,p,E){this.key=n,this.value=p,this.negated=E,this.type=14}static create(n,p,E=null){return i(p,D=>new m(n,D,E))}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=c.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerExpr=m;class y{constructor(n,p,E){this.key=n,this.value=p,this.negated=E,this.type=15}static create(n,p,E=null){return i(p,D=>new y(n,D,E))}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=h.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerEqualsExpr=y;class _{constructor(n,p){this.key=n,this.regexp=p,this.type=7,this.negated=null}static create(n,p){return new _(n,p)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.key<n.key)return-1;if(this.key>n.key)return 1;const p=this.regexp?this.regexp.source:"",E=n.regexp?n.regexp.source:"";return p<E?-1:p>E?1:0}equals(n){if(n.type===this.type){const p=this.regexp?this.regexp.source:"",E=n.regexp?n.regexp.source:"";return this.key===n.key&&p===E}return!1}substituteConstants(){return this}evaluate(n){const p=n.getValue(this.key);return this.regexp?this.regexp.test(p):!1}serialize(){const n=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${n}`}keys(){return[this.key]}map(n){return n.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=a.create(this)),this.negated}}e.ContextKeyRegexExpr=_;class a{constructor(n){this._actual=n,this.type=8}static create(n){return new a(n)}cmp(n){return n.type!==this.type?this.type-n.type:this._actual.cmp(n._actual)}equals(n){return n.type===this.type?this._actual.equals(n._actual):!1}substituteConstants(){return this}evaluate(n){return!this._actual.evaluate(n)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(n){return new a(this._actual.map(n))}negate(){return this._actual}}e.ContextKeyNotRegexExpr=a;function l(B){let n=null;for(let p=0,E=B.length;p<E;p++){const D=B[p].substituteConstants();if(B[p]!==D&&n===null){n=[];for(let G=0;G<p;G++)n[G]=B[G]}n!==null&&(n[p]=D)}return n===null?B:n}class r{constructor(n,p){this.expr=n,this.negated=p,this.type=6}static create(n,p){return r._normalizeArr(n,p)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let p=0,E=this.expr.length;p<E;p++){const D=I(this.expr[p],n.expr[p]);if(D!==0)return D}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let p=0,E=this.expr.length;p<E;p++)if(!this.expr[p].equals(n.expr[p]))return!1;return!0}return!1}substituteConstants(){const n=l(this.expr);return n===this.expr?this:r.create(n,this.negated)}evaluate(n){for(let p=0,E=this.expr.length;p<E;p++)if(!this.expr[p].evaluate(n))return!1;return!0}static _normalizeArr(n,p){const E=[];let D=!1;for(const G of n)if(!!G){if(G.type===1){D=!0;continue}if(G.type===0)return P.INSTANCE;if(G.type===6){E.push(...G.expr);continue}E.push(G)}if(E.length===0&&D)return L.INSTANCE;if(E.length!==0){if(E.length===1)return E[0];E.sort(I);for(let G=1;G<E.length;G++)E[G-1].equals(E[G])&&(E.splice(G,1),G--);if(E.length===1)return E[0];for(;E.length>1;){const G=E[E.length-1];if(G.type!==9)break;E.pop();const Y=E.pop(),J=E.length===0,z=u.create(G.expr.map(K=>r.create([K,Y],null)),null,J);z&&(E.push(z),E.sort(I))}return E.length===1?E[0]:new r(E,p)}}serialize(){return this.expr.map(n=>n.serialize()).join(" && ")}keys(){const n=[];for(const p of this.expr)n.push(...p.keys());return n}map(n){return new r(this.expr.map(p=>p.map(n)),null)}negate(){if(!this.negated){const n=[];for(const p of this.expr)n.push(p.negate());this.negated=u.create(n,this,!0)}return this.negated}}class u{constructor(n,p){this.expr=n,this.negated=p,this.type=9}static create(n,p,E){return u._normalizeArr(n,p,E)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let p=0,E=this.expr.length;p<E;p++){const D=I(this.expr[p],n.expr[p]);if(D!==0)return D}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let p=0,E=this.expr.length;p<E;p++)if(!this.expr[p].equals(n.expr[p]))return!1;return!0}return!1}substituteConstants(){const n=l(this.expr);return n===this.expr?this:u.create(n,this.negated,!1)}evaluate(n){for(let p=0,E=this.expr.length;p<E;p++)if(this.expr[p].evaluate(n))return!0;return!1}static _normalizeArr(n,p,E){let D=[],G=!1;if(n){for(let Y=0,J=n.length;Y<J;Y++){const z=n[Y];if(!!z){if(z.type===0){G=!0;continue}if(z.type===1)return L.INSTANCE;if(z.type===9){D=D.concat(z.expr);continue}D.push(z)}}if(D.length===0&&G)return P.INSTANCE;D.sort(I)}if(D.length!==0){if(D.length===1)return D[0];for(let Y=1;Y<D.length;Y++)D[Y-1].equals(D[Y])&&(D.splice(Y,1),Y--);if(D.length===1)return D[0];if(E){for(let Y=0;Y<D.length;Y++)for(let J=Y+1;J<D.length;J++)$(D[Y],D[J])&&(D.splice(J,1),J--);if(D.length===1)return D[0]}return new u(D,p)}}serialize(){return this.expr.map(n=>n.serialize()).join(" || ")}keys(){const n=[];for(const p of this.expr)n.push(...p.keys());return n}map(n){return new u(this.expr.map(p=>p.map(n)),null)}negate(){if(!this.negated){const n=[];for(const p of this.expr)n.push(p.negate());for(;n.length>1;){const p=n.shift(),E=n.shift(),D=[];for(const Y of j(p))for(const J of j(E))D.push(r.create([Y,J],null));const G=n.length===0;n.unshift(u.create(D,null,G))}this.negated=n[0]}return this.negated}}class f extends T{constructor(n,p,E){super(n,null);this._defaultValue=p,typeof E=="object"?f._info.push({...E,key:n}):E!==!0&&f._info.push({key:n,description:E,type:p!=null?typeof p:void 0})}static all(){return f._info.values()}bindTo(n){return n.createKey(this.key,this._defaultValue)}getValue(n){return n.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(n){return b.create(this.key,n)}notEqualsTo(n){return t.create(this.key,n)}}e.RawContextKey=f,f._info=[],e.IContextKeyService=(0,q.createDecorator)("contextKeyService"),e.SET_CONTEXT_COMMAND_ID="setContext";function C(B,n){return B<n?-1:B>n?1:0}function S(B,n,p,E){return B<p?-1:B>p?1:n<E?-1:n>E?1:0}function $(B,n){if(n.type===6&&B.type!==9&&B.type!==6){for(const D of n.expr)if(B.equals(D))return!0}const p=B.negate(),E=j(p).concat(j(n));E.sort(I);for(let D=0;D<E.length;D++){const Y=E[D].negate();for(let J=D+1;J<E.length;J++){const z=E[J];if(Y.equals(z))return!0}}return!1}e.implies=$;function j(B){return B.type===9?B.expr:[B]}}),define(ne[30],ie([0,1,5,20,35,12,8,4,3,29]),function(te,e,M,F,q,N,O,A,R,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotebookWorkingCopyTypeIdentifier=e.CellStatusbarAlignment=e.NotebookSetting=e.notebookDocumentFilterMatch=e.isDocumentExcludePattern=e.NotebookEditorPriority=e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=e.diff=e.MimeTypeDisplayOrder=e.CellUri=e.CellEditType=e.SelectionStateType=e.NotebookCellsChangeType=e.RendererMessagingSpec=e.NotebookRendererMatch=e.NotebookCellExecutionState=e.NotebookRunState=e.RENDERER_NOT_AVAILABLE=e.RENDERER_EQUIVALENT_EXTENSIONS=e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=e.NOTEBOOK_DISPLAY_ORDER=e.CellKind=e.NOTEBOOK_DIFF_EDITOR_ID=e.NOTEBOOK_EDITOR_ID=void 0,e.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",e.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor";var I;(function(r){r[r.Markup=1]="Markup",r[r.Code=2]="Code"})(I=e.CellKind||(e.CellKind={})),e.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",N.Mimes.latex,N.Mimes.markdown,"image/png","image/jpeg",N.Mimes.text],e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[N.Mimes.latex,N.Mimes.markdown,"application/json",N.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],e.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),e.RENDERER_NOT_AVAILABLE="_notAvailable";var P;(function(r){r[r.Running=1]="Running",r[r.Idle=2]="Idle"})(P=e.NotebookRunState||(e.NotebookRunState={}));var L;(function(r){r[r.Unconfirmed=1]="Unconfirmed",r[r.Pending=2]="Pending",r[r.Executing=3]="Executing"})(L=e.NotebookCellExecutionState||(e.NotebookCellExecutionState={}));var T;(function(r){r[r.WithHardKernelDependency=0]="WithHardKernelDependency",r[r.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",r[r.Pure=2]="Pure",r[r.Never=3]="Never"})(T=e.NotebookRendererMatch||(e.NotebookRendererMatch={}));var b;(function(r){r.Always="always",r.Never="never",r.Optional="optional"})(b=e.RendererMessagingSpec||(e.RendererMessagingSpec={}));var d;(function(r){r[r.ModelChange=1]="ModelChange",r[r.Move=2]="Move",r[r.ChangeCellLanguage=5]="ChangeCellLanguage",r[r.Initialize=6]="Initialize",r[r.ChangeCellMetadata=7]="ChangeCellMetadata",r[r.Output=8]="Output",r[r.OutputItem=9]="OutputItem",r[r.ChangeCellContent=10]="ChangeCellContent",r[r.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",r[r.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",r[r.ChangeCellMime=13]="ChangeCellMime",r[r.Unknown=100]="Unknown"})(d=e.NotebookCellsChangeType||(e.NotebookCellsChangeType={}));var o;(function(r){r[r.Handle=0]="Handle",r[r.Index=1]="Index"})(o=e.SelectionStateType||(e.SelectionStateType={}));var t;(function(r){r[r.Replace=1]="Replace",r[r.Output=2]="Output",r[r.Metadata=3]="Metadata",r[r.CellLanguage=4]="CellLanguage",r[r.DocumentMetadata=5]="DocumentMetadata",r[r.Move=6]="Move",r[r.OutputItems=7]="OutputItems",r[r.PartialMetadata=8]="PartialMetadata",r[r.PartialInternalMetadata=9]="PartialInternalMetadata"})(t=e.CellEditType||(e.CellEditType={}));var s;(function(r){r.scheme=O.Schemas.vscodeNotebookCell;const u=["W","X","Y","Z","a","b","c","d","e","f"],f=new RegExp(`^[${u.join("")}]+`),C=7;function S(D,G){const Y=G.toString(C),z=`${Y.length<u.length?u[Y.length-1]:"z"}${Y}s${(0,M.encodeBase64)(M.VSBuffer.fromString(D.scheme),!0,!0)}`;return D.with({scheme:r.scheme,fragment:z})}r.generate=S;function $(D){if(D.scheme!==r.scheme)return;const G=D.fragment.indexOf("s");if(G<0)return;const Y=parseInt(D.fragment.substring(0,G).replace(f,""),C),J=(0,M.decodeBase64)(D.fragment.substring(G+1)).toString();if(!isNaN(Y))return{handle:Y,notebook:D.with({scheme:J,fragment:null})}}r.parse=$;const j=/^(\d{8,})(\w[\w\d+.-]*)$/;function B(D,G){return D.with({scheme:O.Schemas.vscodeNotebookCellOutput,fragment:`op${G??""},${D.scheme!==O.Schemas.file?D.scheme:""}`})}r.generateCellOutputUri=B;function n(D){if(D.scheme!==O.Schemas.vscodeNotebookCellOutput)return;const G=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(D.fragment);if(!G)return;const Y=G[1]&&G[1]!==""?G[1]:void 0,J=G[2];return{outputId:Y,notebook:D.with({scheme:J||O.Schemas.file,fragment:null})}}r.parseCellOutputUri=n;function p(D,G,Y){return D.with({scheme:Y,fragment:`ch${G.toString().padStart(7,"0")}${D.scheme!==O.Schemas.file?D.scheme:""}`})}r.generateCellUri=p;function E(D,G){if(D.scheme!==G)return;const Y=j.exec(D.fragment);return Y?{handle:Number(Y[1]),notebook:D.with({scheme:D.fragment.substring(Y[0].length)||O.Schemas.file,fragment:null})}:void 0}r.parseCellUri=E})(s=e.CellUri||(e.CellUri={}));const i=r=>R.isWindows?r.replace(/\//g,"\\"):r;class h{constructor(u=[],f=e.NOTEBOOK_DISPLAY_ORDER){this.defaultOrder=f,this.order=[...new Set(u)].map(C=>({pattern:C,matches:F.parse(i(C))}))}sort(u){const f=new Map(q.Iterable.map(u,S=>[S,i(S)]));let C=[];for(const{matches:S}of this.order)for(const[$,j]of f)if(S(j)){C.push($),f.delete($);break}return f.size&&(C=C.concat([...f.keys()].sort((S,$)=>this.defaultOrder.indexOf(S)-this.defaultOrder.indexOf($)))),C}prioritize(u,f){const C=this.findIndex(u);if(C===-1){this.order.unshift({pattern:u,matches:F.parse(i(u))});return}const S=new Set(f.map(j=>this.findIndex(j,C)));S.delete(-1);const $=Array.from(S).sort();this.order.splice(C+1,0,...$.map(j=>this.order[j]));for(let j=$.length-1;j>=0;j--)this.order.splice($[j],1)}toArray(){return this.order.map(u=>u.pattern)}findIndex(u,f=this.order.length){const C=i(u);for(let S=0;S<f;S++)if(this.order[S].matches(C))return S;return-1}}e.MimeTypeDisplayOrder=h;function c(r,u,f,C=(S,$)=>S===$){const S=[];function $(n,p,E){if(p===0&&E.length===0)return;const D=S[S.length-1];D&&D.start+D.deleteCount===n?(D.deleteCount+=p,D.toInsert.push(...E)):S.push({start:n,deleteCount:p,toInsert:E})}let j=0,B=0;for(;;){if(j===r.length){$(j,0,u.slice(B));break}if(B===u.length){$(j,r.length-j,[]);break}const n=r[j],p=u[B];if(C(n,p)){j+=1,B+=1;continue}f(p)?($(j,1,[]),j+=1):($(j,0,[p]),B+=1)}return S}e.diff=c,e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new w.RawContextKey("notebookEditorCursorAtBoundary","none");var m;(function(r){r.default="default",r.option="option"})(m=e.NotebookEditorPriority||(e.NotebookEditorPriority={}));function y(r){const u=r;return!!((typeof u.include=="string"||F.isRelativePattern(u.include))&&(typeof u.exclude=="string"||F.isRelativePattern(u.exclude)))}e.isDocumentExcludePattern=y;function _(r,u,f){if(Array.isArray(r.viewType)&&r.viewType.indexOf(u)>=0||r.viewType===u)return!0;if(r.filenamePattern){const C=y(r.filenamePattern)?r.filenamePattern.include:r.filenamePattern,S=y(r.filenamePattern)?r.filenamePattern.exclude:void 0;if(F.match(C,(0,A.basename)(f.fsPath).toLowerCase()))return!(S&&F.match(S,(0,A.basename)(f.fsPath).toLowerCase()))}return!1}e.notebookDocumentFilterMatch=_,e.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",textOutputLineLimit:"notebook.output.textLineLimit",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputLineHeight:"notebook.outputLineHeight",outputFontSize:"notebook.outputFontSize",outputFontFamily:"notebook.outputFontFamily"};var a;(function(r){r[r.Left=1]="Left",r[r.Right=2]="Right"})(a=e.CellStatusbarAlignment||(e.CellStatusbarAlignment={}));class l{static create(u){return`${l._prefix}${u}`}static parse(u){if(u.startsWith(l._prefix))return u.substring(l._prefix.length)}}e.NotebookWorkingCopyTypeIdentifier=l,l._prefix="notebook/"}),define(ne[36],ie([0,1,37,38,9,27,30,11]),function(te,e,M,F,q,N,O,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.NotebookEditorSimpleWorker=e.CellSequence=void 0;function R(b){let d=(0,F.numberHash)(104579,0);for(let o=0;o<b.buffer.length;o++)d=(0,F.doHash)(b.buffer[o],d);return d}class w{constructor(d,o,t,s,i,h,c){this.handle=d,this._source=o,this.language=t,this.cellKind=s,this.outputs=i,this.metadata=h,this.internalMetadata=c,this._primaryKey=null,this._hash=null}get textBuffer(){if(this._textBuffer)return this._textBuffer;const d=new N.PieceTreeTextBufferBuilder;d.acceptChunk(Array.isArray(this._source)?this._source.join(`
`):this._source);const o=d.finish(!0);return this._textBuffer=o.create(1).textBuffer,this._textBuffer}primaryKey(){return this._primaryKey===void 0&&(this._primaryKey=(0,F.hash)(this.getValue())),this._primaryKey}getFullModelRange(){const d=this.textBuffer.getLineCount();return new A.Range(1,1,d,this.textBuffer.getLineLength(d)+1)}getValue(){const d=this.getFullModelRange();return this.textBuffer.getEOL()===`
`?this.textBuffer.getValueInRange(d,1):this.textBuffer.getValueInRange(d,2)}getComparisonValue(){return this._primaryKey!==null?this._primaryKey:(this._hash=(0,F.hash)([(0,F.hash)(this.language),(0,F.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(d=>({outputs:d.outputs.map(o=>({mime:o.mime,data:R(o.data)})),metadata:d.metadata}))]),this._hash)}getHashValue(){return this._hash!==null?this._hash:(this._hash=(0,F.hash)([(0,F.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this._hash)}}class I{constructor(d,o,t){this.uri=d,this.cells=o,this.metadata=t}acceptModelChanged(d){d.rawEvents.forEach(o=>{if(o.kind===O.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(o.changes);else if(o.kind===O.NotebookCellsChangeType.Move){const t=this.cells.splice(o.index,1);this.cells.splice(o.newIdx,0,...t)}else if(o.kind===O.NotebookCellsChangeType.Output){const t=this.cells[o.index];t.outputs=o.outputs}else if(o.kind===O.NotebookCellsChangeType.ChangeCellLanguage){const t=this.cells[o.index];t.language=o.language}else if(o.kind===O.NotebookCellsChangeType.ChangeCellMetadata){const t=this.cells[o.index];t.metadata=o.metadata}else if(o.kind===O.NotebookCellsChangeType.ChangeCellInternalMetadata){const t=this.cells[o.index];t.internalMetadata=o.internalMetadata}})}_spliceNotebookCells(d){d.reverse().forEach(o=>{const s=o[2].map(i=>new w(i.handle,i.source,i.language,i.cellKind,i.outputs,i.metadata));this.cells.splice(o[0],o[1],...s)})}}class P{constructor(d){this.textModel=d}getElements(){const d=new Int32Array(this.textModel.cells.length);for(let o=0;o<this.textModel.cells.length;o++)d[o]=this.textModel.cells[o].getComparisonValue();return d}getCellHash(d){const o=Array.isArray(d.source)?d.source.join(`
`):d.source;return(0,F.hash)([(0,F.hash)(o),d.metadata])}}e.CellSequence=P;class L{constructor(){this._models=Object.create(null)}dispose(){}acceptNewModel(d,o){this._models[d]=new I(q.URI.parse(d),o.cells.map(t=>new w(t.handle,t.source,t.language,t.cellKind,t.outputs,t.metadata)),o.metadata)}acceptModelChanged(d,o){this._models[d]?.acceptModelChanged(o)}acceptRemovedModel(d){!this._models[d]||delete this._models[d]}computeDiff(d,o){const t=this._getModel(d),s=this._getModel(o);return{cellsDiff:new M.LcsDiff(new P(t),new P(s)).ComputeDiff(!1)}}_getModel(d){return this._models[d]}}e.NotebookEditorSimpleWorker=L;function T(b){return new L}e.create=T})}).call(this);

//# sourceMappingURL=notebookSimpleWorker.js.map
