<head>
    <title>xterm测试</title>
    <link href="/js/xterm.css" rel="stylesheet">
    <script src="/js/xterm.js"></script>
    <script src="/js/xterm-addon-web-links.js"></script>
    <script src="/js/xterm-addon-search.js"></script>
</head>
<body>
<div id="terminal"></div>
<label for="search-terminal">
    搜索
    <input id="search-terminal" value="hello"/>
    <button onclick="onFindPre()">pre</button>
    <button onclick="onFindNext()">next</button>
</label>
<script>
  var term = new Terminal({
    rendererType: 'dom'
  });
  term.open(document.getElementById('terminal'));
  term.writeln('Hello from \x1B[1;3;31mxterm.js\x1B[0m $ ');
  term.writeln('Hello from \x1B[1;3;31mxterm.js\x1B[0m $ ');
  term.writeln('Hello from \x1B[1;3;31mxterm.js\x1B[0m $ ');
  term.writeln('Hello from \x1B[1;3;31mxterm.js\x1B[0m $ ');
  term.writeln('Hello from \x1B[1;3;31mxterm.js\x1B[0m $ ');
  term.writeln('https://1991421.cn');
  term.loadAddon(new WebLinksAddon.WebLinksAddon(
    (event, uri) => {
      if (event.metaKey) {
        window.open(uri);
      }
    }));
  let searchAddon = new SearchAddon.SearchAddon();
  term.loadAddon(searchAddon);
  function onFindPre() {
    let value = document.getElementById('search-terminal').value;
    if (!value || !value.trim()) {
      return;
    }
    searchAddon.findPrevious(value, {
      decorations: {
        activeMatchBackground: '#fffd54'
      }
    });
  }

  function onFindNext() {
    let value = document.getElementById('search-terminal').value;
    if (!value || !value.trim()) {
      return;
    }
    searchAddon.findNext(value, {
      decorations: {
        activeMatchBackground: '#fffd54'
      }
    });
  }
</script>
</body>
